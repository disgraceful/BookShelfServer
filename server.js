/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./api/server.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./api/controllers/authController.js":
/*!*******************************************!*\
  !*** ./api/controllers/authController.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _services_authService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/authService */ \"./api/services/authService.js\");\n/* harmony import */ var _services_tokenService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/tokenService */ \"./api/services/tokenService.js\");\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar tokenService = new _services_tokenService__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\nvar authService = new _services_authService__WEBPACK_IMPORTED_MODULE_0__[\"default\"](tokenService);\n\nvar AuthController = /*#__PURE__*/function () {\n  function AuthController(authService) {\n    _classCallCheck(this, AuthController);\n\n    this.authService = authService;\n    this.signInUser = this.signInUser.bind(this);\n    this.signUpUser = this.signUpUser.bind(this);\n    this.signInWithGoogle = this.signInWithGoogle.bind(this);\n    this.signInWithTwitter = this.signInWithTwitter.bind(this);\n    this.getRequestUrl = this.getRequestUrl.bind(this);\n  }\n\n  _createClass(AuthController, [{\n    key: \"signInUser\",\n    value: function () {\n      var _signInUser = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(request, response) {\n        var userCredentials, user;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                console.log(\"SignIn request accepted\");\n                userCredentials = request.body;\n\n                if (!(!userCredentials || !userCredentials.email || !userCredentials.password)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](400, \"User credentials are invalid\");\n\n              case 5:\n                _context.next = 7;\n                return this.authService.getUser(userCredentials.email, userCredentials.password);\n\n              case 7:\n                user = _context.sent;\n                response.json(user);\n                _context.next = 14;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](0);\n                response.status(_context.t0.httpCode).json({\n                  httpCode: _context.t0.httpCode,\n                  message: _context.t0.userMessage\n                });\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 11]]);\n      }));\n\n      function signInUser(_x, _x2) {\n        return _signInUser.apply(this, arguments);\n      }\n\n      return signInUser;\n    }()\n  }, {\n    key: \"signUpUser\",\n    value: function () {\n      var _signUpUser = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(request, response) {\n        var userCredentials, user;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                console.log(\"SignUp request accepted\");\n                userCredentials = request.body;\n\n                if (!(!userCredentials || !userCredentials.email || !userCredentials.password)) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](400, \"User credentials are invalid\");\n\n              case 5:\n                _context2.next = 7;\n                return this.authService.createUser(userCredentials.email, userCredentials.password);\n\n              case 7:\n                user = _context2.sent;\n                response.json(user);\n                _context2.next = 14;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](0);\n                response.status(_context2.t0.httpCode).json({\n                  httpCode: _context2.t0.httpCode,\n                  message: _context2.t0.userMessage\n                });\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 11]]);\n      }));\n\n      function signUpUser(_x3, _x4) {\n        return _signUpUser.apply(this, arguments);\n      }\n\n      return signUpUser;\n    }()\n  }, {\n    key: \"signInWithGoogle\",\n    value: function () {\n      var _signInWithGoogle = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(request, response) {\n        var idToken, result;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                console.log(\"Sign In With Google request accepted\");\n                _context3.prev = 1;\n                idToken = request.body.token;\n                _context3.next = 5;\n                return this.authService.signInGoogle(idToken);\n\n              case 5:\n                result = _context3.sent;\n                response.json(result);\n                _context3.next = 13;\n                break;\n\n              case 9:\n                _context3.prev = 9;\n                _context3.t0 = _context3[\"catch\"](1);\n                console.log(_context3.t0);\n                response.status(_context3.t0.httpCode).json({\n                  httpCode: _context3.t0.httpCode,\n                  message: _context3.t0.userMessage\n                });\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[1, 9]]);\n      }));\n\n      function signInWithGoogle(_x5, _x6) {\n        return _signInWithGoogle.apply(this, arguments);\n      }\n\n      return signInWithGoogle;\n    }()\n  }, {\n    key: \"signInWithTwitter\",\n    value: function () {\n      var _signInWithTwitter = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(request, response) {\n        var token, verifier, accessTokenInfo, result;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                console.log(\"Sign In With Twitter request accepted\");\n                _context4.prev = 1;\n                token = request.query.token;\n                verifier = request.query.verifier;\n                console.log(token, verifier);\n\n                if (!(!token || !verifier)) {\n                  _context4.next = 7;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](400, \"Invalid request paramrs\");\n\n              case 7:\n                _context4.next = 9;\n                return this.authService.getAccessToken(token, verifier);\n\n              case 9:\n                accessTokenInfo = _context4.sent;\n                _context4.next = 12;\n                return this.authService.signInTwitter(accessTokenInfo.token, accessTokenInfo.secret);\n\n              case 12:\n                result = _context4.sent;\n                response.json(result);\n                _context4.next = 20;\n                break;\n\n              case 16:\n                _context4.prev = 16;\n                _context4.t0 = _context4[\"catch\"](1);\n                console.log(_context4.t0);\n                response.status(_context4.t0.httpCode).json({\n                  httpCode: _context4.t0.httpCode,\n                  message: _context4.t0.userMessage\n                });\n\n              case 20:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[1, 16]]);\n      }));\n\n      function signInWithTwitter(_x7, _x8) {\n        return _signInWithTwitter.apply(this, arguments);\n      }\n\n      return signInWithTwitter;\n    }()\n  }, {\n    key: \"getRequestUrl\",\n    value: function () {\n      var _getRequestUrl = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(request, response) {\n        var result;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                console.log(\"Get OAuth Request Token request accepted\");\n                _context5.prev = 1;\n                _context5.next = 4;\n                return this.authService.getAuthorizeUrl();\n\n              case 4:\n                result = _context5.sent;\n                console.log(result);\n                response.json(result);\n                _context5.next = 13;\n                break;\n\n              case 9:\n                _context5.prev = 9;\n                _context5.t0 = _context5[\"catch\"](1);\n                console.log(_context5.t0);\n                response.status(_context5.t0.httpCode).json({\n                  httpCode: _context5.t0.httpCode,\n                  message: _context5.t0.userMessage\n                });\n\n              case 13:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[1, 9]]);\n      }));\n\n      function getRequestUrl(_x9, _x10) {\n        return _getRequestUrl.apply(this, arguments);\n      }\n\n      return getRequestUrl;\n    }()\n  }]);\n\n  return AuthController;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new AuthController(authService));\n\n//# sourceURL=webpack:///./api/controllers/authController.js?");

/***/ }),

/***/ "./api/controllers/authorController.js":
/*!*********************************************!*\
  !*** ./api/controllers/authorController.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _services_goodreads_goodreadsAuthorService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/goodreads/goodreadsAuthorService */ \"./api/services/goodreads/goodreadsAuthorService.js\");\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\n/* harmony import */ var _services_formatting_formatAuthorService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/formatting/formatAuthorService */ \"./api/services/formatting/formatAuthorService.js\");\n/* harmony import */ var _services_formatting_formatSeriesService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/formatting/formatSeriesService */ \"./api/services/formatting/formatSeriesService.js\");\n/* harmony import */ var _http_interceptors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../http/interceptors */ \"./api/http/interceptors.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\nvar formatAuthorService = new _services_formatting_formatAuthorService__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\nvar formatSeriesService = new _services_formatting_formatSeriesService__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\nvar goodreadsAuthorService = new _services_goodreads_goodreadsAuthorService__WEBPACK_IMPORTED_MODULE_0__[\"default\"](formatAuthorService, formatSeriesService);\n\nvar AuthorController = /*#__PURE__*/function () {\n  function AuthorController(goodreadsAuthorService) {\n    _classCallCheck(this, AuthorController);\n\n    this.goodreadsAuthorService = goodreadsAuthorService;\n    this.getAuthorInfo = this.getAuthorInfo.bind(this);\n    this.getAuthorBooks = this.getAuthorBooks.bind(this);\n    this.getAuthorSeries = this.getAuthorSeries.bind(this);\n  }\n\n  _createClass(AuthorController, [{\n    key: \"getAuthorInfo\",\n    value: function () {\n      var _getAuthorInfo = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(request, response) {\n        var authorId, result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                console.log(\"Get Author request accepted!\");\n                authorId = request.params.id;\n\n                if (!(!authorId || isNaN(authorId))) {\n                  _context.next = 5;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Request param is not valid\");\n\n              case 5:\n                Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_4__[\"tokenInterceptor\"])(request);\n                _context.next = 8;\n                return this.goodreadsAuthorService.getAuthorByGoodreadsId(authorId);\n\n              case 8:\n                result = _context.sent;\n                response.json(result);\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](0);\n                response.status(_context.t0.httpCode).json({\n                  httpCode: _context.t0.httpCode,\n                  message: _context.t0.userMessage\n                });\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 12]]);\n      }));\n\n      function getAuthorInfo(_x, _x2) {\n        return _getAuthorInfo.apply(this, arguments);\n      }\n\n      return getAuthorInfo;\n    }()\n  }, {\n    key: \"getAuthorBooks\",\n    value: function () {\n      var _getAuthorBooks = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(request, response) {\n        var authorId, result;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                console.log(\"Get Author's Books request accepted\");\n                authorId = request.params.id;\n\n                if (authorId) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Request param is not valid\");\n\n              case 5:\n                Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_4__[\"tokenInterceptor\"])(request);\n                _context2.next = 8;\n                return this.goodreadsAuthorService.getAuthorBooks(authorId);\n\n              case 8:\n                result = _context2.sent;\n                response.json(result);\n                _context2.next = 15;\n                break;\n\n              case 12:\n                _context2.prev = 12;\n                _context2.t0 = _context2[\"catch\"](0);\n                response.status(_context2.t0.httpCode).json({\n                  httpCode: _context2.t0.httpCode,\n                  message: _context2.t0.userMessage\n                });\n\n              case 15:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 12]]);\n      }));\n\n      function getAuthorBooks(_x3, _x4) {\n        return _getAuthorBooks.apply(this, arguments);\n      }\n\n      return getAuthorBooks;\n    }()\n  }, {\n    key: \"getAuthorSeries\",\n    value: function () {\n      var _getAuthorSeries = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(request, response) {\n        var authorId, result;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                console.log(\"Get Author's Series request accepted\");\n                authorId = request.params.id;\n\n                if (authorId) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Request param is not valid\");\n\n              case 5:\n                Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_4__[\"tokenInterceptor\"])(request);\n                _context3.next = 8;\n                return this.goodreadsAuthorService.getAuthorSeries(authorId);\n\n              case 8:\n                result = _context3.sent;\n                response.json(result);\n                _context3.next = 15;\n                break;\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](0);\n                response.status(_context3.t0.httpCode).json({\n                  httpCode: _context3.t0.httpCode,\n                  message: _context3.t0.userMessage\n                });\n\n              case 15:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 12]]);\n      }));\n\n      function getAuthorSeries(_x5, _x6) {\n        return _getAuthorSeries.apply(this, arguments);\n      }\n\n      return getAuthorSeries;\n    }()\n  }]);\n\n  return AuthorController;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new AuthorController(goodreadsAuthorService));\n\n//# sourceURL=webpack:///./api/controllers/authorController.js?");

/***/ }),

/***/ "./api/controllers/bookController.js":
/*!*******************************************!*\
  !*** ./api/controllers/bookController.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _services_goodreads_goodreadsBookService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/goodreads/goodreadsBookService */ \"./api/services/goodreads/goodreadsBookService.js\");\n/* harmony import */ var _services_formatting_formatBookService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/formatting/formatBookService */ \"./api/services/formatting/formatBookService.js\");\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\n/* harmony import */ var _http_interceptors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../http/interceptors */ \"./api/http/interceptors.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\nvar formatBookService = new _services_formatting_formatBookService__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\nvar goodreadsBookService = new _services_goodreads_goodreadsBookService__WEBPACK_IMPORTED_MODULE_0__[\"default\"](formatBookService);\n\nvar BookController = /*#__PURE__*/function () {\n  function BookController(goodreadsBookService) {\n    _classCallCheck(this, BookController);\n\n    this.goodreadsBookService = goodreadsBookService;\n    this.searchByTitleOrAuthor = this.searchByTitleOrAuthor.bind(this);\n    this.getBookById = this.getBookById.bind(this);\n  }\n\n  _createClass(BookController, [{\n    key: \"searchByTitleOrAuthor\",\n    value: function () {\n      var _searchByTitleOrAuthor = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(request, response) {\n        var searchQuery, result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                console.log(\"Search request accepted!\");\n                searchQuery = request.query.query;\n\n                if (searchQuery) {\n                  _context.next = 5;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](400, \"Search query is empty\");\n\n              case 5:\n                Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_3__[\"tokenInterceptor\"])(request);\n                _context.next = 8;\n                return this.goodreadsBookService.searchBooks(searchQuery);\n\n              case 8:\n                result = _context.sent;\n                response.json(result);\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](0);\n                response.status(_context.t0.httpCode).json({\n                  httpCode: _context.t0.httpCode,\n                  message: _context.t0.userMessage\n                });\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 12]]);\n      }));\n\n      function searchByTitleOrAuthor(_x, _x2) {\n        return _searchByTitleOrAuthor.apply(this, arguments);\n      }\n\n      return searchByTitleOrAuthor;\n    }()\n  }, {\n    key: \"getBookById\",\n    value: function () {\n      var _getBookById = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(request, response) {\n        var bookId, validated, result;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                console.log(\"Get Book By Id request accepted\");\n                bookId = request.params.bookId;\n\n                if (!(!bookId || isNaN(bookId))) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](400, \"Book identifier is invalid\");\n\n              case 5:\n                validated = Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_3__[\"tokenInterceptor\"])(request);\n                _context2.next = 8;\n                return this.goodreadsBookService.getBookWithUserData(bookId, validated.id);\n\n              case 8:\n                result = _context2.sent;\n                response.json(result);\n                _context2.next = 15;\n                break;\n\n              case 12:\n                _context2.prev = 12;\n                _context2.t0 = _context2[\"catch\"](0);\n                response.status(_context2.t0.httpCode).json({\n                  httpCode: _context2.t0.httpCode,\n                  message: _context2.t0.userMessage\n                });\n\n              case 15:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 12]]);\n      }));\n\n      function getBookById(_x3, _x4) {\n        return _getBookById.apply(this, arguments);\n      }\n\n      return getBookById;\n    }()\n  }]);\n\n  return BookController;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new BookController(goodreadsBookService));\n\n//# sourceURL=webpack:///./api/controllers/bookController.js?");

/***/ }),

/***/ "./api/controllers/feedController.js":
/*!*******************************************!*\
  !*** ./api/controllers/feedController.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _services_feedService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/feedService */ \"./api/services/feedService.js\");\n/* harmony import */ var _http_interceptors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../http/interceptors */ \"./api/http/interceptors.js\");\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar feedService = new _services_feedService__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n\nvar FeedController = /*#__PURE__*/function () {\n  function FeedController(feedService) {\n    _classCallCheck(this, FeedController);\n\n    this.feedService = feedService;\n    this.getFeed = this.getFeed.bind(this);\n  }\n\n  _createClass(FeedController, [{\n    key: \"getFeed\",\n    value: function () {\n      var _getFeed = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(request, response) {\n        var date, validated, result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                console.log(\"Get Feed request accepted\");\n                date = request.query.date;\n                validated = Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_1__[\"tokenInterceptor\"])(request);\n\n                if (date) {\n                  _context.next = 10;\n                  break;\n                }\n\n                _context.next = 7;\n                return this.feedService.getAllUserFeed(validated.id);\n\n              case 7:\n                result = _context.sent;\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.next = 12;\n                return this.feedService.getUserFeedByDate(validated.id, date);\n\n              case 12:\n                result = _context.sent;\n\n              case 13:\n                response.json(result);\n                _context.next = 19;\n                break;\n\n              case 16:\n                _context.prev = 16;\n                _context.t0 = _context[\"catch\"](0);\n                response.status(_context.t0.httpCode || 500).json({\n                  httpCode: _context.t0.httpCode,\n                  message: _context.t0.userMessage\n                });\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 16]]);\n      }));\n\n      function getFeed(_x, _x2) {\n        return _getFeed.apply(this, arguments);\n      }\n\n      return getFeed;\n    }()\n  }]);\n\n  return FeedController;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new FeedController(feedService));\n\n//# sourceURL=webpack:///./api/controllers/feedController.js?");

/***/ }),

/***/ "./api/controllers/seriesController.js":
/*!*********************************************!*\
  !*** ./api/controllers/seriesController.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\n/* harmony import */ var _services_goodreads_goodreadsSeriesService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/goodreads/goodreadsSeriesService */ \"./api/services/goodreads/goodreadsSeriesService.js\");\n/* harmony import */ var _services_formatting_formatSeriesService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/formatting/formatSeriesService */ \"./api/services/formatting/formatSeriesService.js\");\n/* harmony import */ var _http_interceptors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../http/interceptors */ \"./api/http/interceptors.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\nvar formatSeriesService = new _services_formatting_formatSeriesService__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\nvar goodreadsSeriesService = new _services_goodreads_goodreadsSeriesService__WEBPACK_IMPORTED_MODULE_1__[\"default\"](formatSeriesService);\n\nvar SeriesController = /*#__PURE__*/function () {\n  function SeriesController(goodreadsSeriesService) {\n    _classCallCheck(this, SeriesController);\n\n    this.goodreadsSeriesService = goodreadsSeriesService;\n    this.getSeriesById = this.getSeriesById.bind(this);\n  }\n\n  _createClass(SeriesController, [{\n    key: \"getSeriesById\",\n    value: function () {\n      var _getSeriesById = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(request, response) {\n        var seriesId, result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                console.log(\"Get Series By Id request accepted!\");\n                seriesId = request.params.id;\n\n                if (!(!seriesId || isNaN(seriesId))) {\n                  _context.next = 5;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_0__[\"ErrorWithHttpCode\"](400, \"Series id is empty\");\n\n              case 5:\n                Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_3__[\"tokenInterceptor\"])(request);\n                _context.next = 8;\n                return this.goodreadsSeriesService.getSeriesByGoodreadsId(seriesId);\n\n              case 8:\n                result = _context.sent;\n                response.json(result);\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](0);\n                response.status(_context.t0.httpCode).json({\n                  httpCode: _context.t0.httpCode,\n                  message: _context.t0.userMessage\n                });\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 12]]);\n      }));\n\n      function getSeriesById(_x, _x2) {\n        return _getSeriesById.apply(this, arguments);\n      }\n\n      return getSeriesById;\n    }()\n  }]);\n\n  return SeriesController;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new SeriesController(goodreadsSeriesService));\n\n//# sourceURL=webpack:///./api/controllers/seriesController.js?");

/***/ }),

/***/ "./api/controllers/userController.js":
/*!*******************************************!*\
  !*** ./api/controllers/userController.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _services_userService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/userService */ \"./api/services/userService.js\");\n/* harmony import */ var _services_userBooksService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/userBooksService */ \"./api/services/userBooksService.js\");\n/* harmony import */ var _services_feedService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/feedService */ \"./api/services/feedService.js\");\n/* harmony import */ var _services_privateBookService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/privateBookService */ \"./api/services/privateBookService.js\");\n/* harmony import */ var _http_interceptors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../http/interceptors */ \"./api/http/interceptors.js\");\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\n\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\n\nvar userService = new _services_userService__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\nvar feedService = new _services_feedService__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\nvar privateBookService = new _services_privateBookService__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\nvar userBooksService = new _services_userBooksService__WEBPACK_IMPORTED_MODULE_1__[\"default\"](feedService);\n\nvar UserController = /*#__PURE__*/function () {\n  function UserController(userService, userBooksService, privateBookService) {\n    _classCallCheck(this, UserController);\n\n    this.userService = userService;\n    this.userBooksService = userBooksService;\n    this.privateBookService = privateBookService;\n    this.getUser = this.getUser.bind(this);\n    this.getUserBooks = this.getUserBooks.bind(this);\n    this.getCollection = this.getCollection.bind(this);\n    this.addToCollection = this.addToCollection.bind(this);\n    this.deleteBook = this.deleteBook.bind(this);\n    this.setFavorite = this.setFavorite.bind(this);\n    this.getFavoriteBooks = this.getFavoriteBooks.bind(this);\n    this.updateBook = this.updateBook.bind(this);\n    this.getUserGenres = this.getUserGenres.bind(this);\n    this.savePrivateBook = this.savePrivateBook.bind(this);\n    this.getAllPrivateBooks = this.getAllPrivateBooks.bind(this);\n    this.getPrivateBookById = this.getPrivateBookById.bind(this);\n    this.removePrivateBook = this.removePrivateBook.bind(this);\n  }\n\n  _createClass(UserController, [{\n    key: \"getUser\",\n    value: function () {\n      var _getUser = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(request, response) {\n        var validated, user;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                console.log(\"Get User request accepted\");\n                validated = Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_4__[\"tokenInterceptor\"])(request);\n                _context.next = 5;\n                return this.userService.getUserById(validated.id);\n\n              case 5:\n                user = _context.sent;\n                response.json(user);\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](0);\n                response.status(_context.t0.httpCode).json({\n                  httpCode: _context.t0.httpCode,\n                  message: _context.t0.userMessage\n                });\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 9]]);\n      }));\n\n      function getUser(_x, _x2) {\n        return _getUser.apply(this, arguments);\n      }\n\n      return getUser;\n    }()\n  }, {\n    key: \"getUserBooks\",\n    value: function () {\n      var _getUserBooks = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(request, response) {\n        var validated, result;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                console.log(\"Get User Books request accepted\");\n                validated = Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_4__[\"tokenInterceptor\"])(request);\n                _context2.next = 5;\n                return this.userBooksService.getUserBooksAsArray(validated.id);\n\n              case 5:\n                result = _context2.sent;\n                response.json(result);\n                _context2.next = 12;\n                break;\n\n              case 9:\n                _context2.prev = 9;\n                _context2.t0 = _context2[\"catch\"](0);\n                response.status(_context2.t0.httpCode).json({\n                  httpCode: _context2.t0.httpCode,\n                  message: _context2.t0.userMessage\n                });\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 9]]);\n      }));\n\n      function getUserBooks(_x3, _x4) {\n        return _getUserBooks.apply(this, arguments);\n      }\n\n      return getUserBooks;\n    }()\n  }, {\n    key: \"getCollection\",\n    value: function () {\n      var _getCollection = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(request, response) {\n        var collection, validated, result;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                collection = request.params.collection;\n                console.log(\"Get Books from \".concat(collection, \" request accepted\"));\n\n                if (collection) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_5__[\"ErrorWithHttpCode\"](400, \"Book status is invalid\");\n\n              case 5:\n                validated = Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_4__[\"tokenInterceptor\"])(request);\n                _context3.next = 8;\n                return this.userBooksService.getUserCollection(validated.id, collection);\n\n              case 8:\n                result = _context3.sent;\n                response.json(result);\n                _context3.next = 15;\n                break;\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](0);\n                response.status(_context3.t0.httpCode).json({\n                  httpCode: _context3.t0.httpCode,\n                  message: _context3.t0.userMessage\n                });\n\n              case 15:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 12]]);\n      }));\n\n      function getCollection(_x5, _x6) {\n        return _getCollection.apply(this, arguments);\n      }\n\n      return getCollection;\n    }()\n  }, {\n    key: \"addToCollection\",\n    value: function () {\n      var _addToCollection = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(request, response) {\n        var collection, book, validated, result;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                collection = request.params.collection;\n                console.log(\"Get Books from \".concat(collection, \" request accepted\"));\n                book = request.body.book;\n\n                if (!(!book || !collection)) {\n                  _context4.next = 6;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_5__[\"ErrorWithHttpCode\"](400, \"Params are invalid\");\n\n              case 6:\n                validated = Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_4__[\"tokenInterceptor\"])(request);\n                _context4.next = 9;\n                return this.userBooksService.addToUserCollection(validated.id, collection, book);\n\n              case 9:\n                result = _context4.sent;\n                response.json(result);\n                _context4.next = 16;\n                break;\n\n              case 13:\n                _context4.prev = 13;\n                _context4.t0 = _context4[\"catch\"](0);\n                response.status(_context4.t0.httpCode).json({\n                  httpCode: _context4.t0.httpCode,\n                  message: _context4.t0.userMessage\n                });\n\n              case 16:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 13]]);\n      }));\n\n      function addToCollection(_x7, _x8) {\n        return _addToCollection.apply(this, arguments);\n      }\n\n      return addToCollection;\n    }()\n  }, {\n    key: \"deleteBook\",\n    value: function () {\n      var _deleteBook = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(request, response) {\n        var bookId, validated, result;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                console.log(\"Book Delete Request accepted\");\n                bookId = request.query.bookId;\n\n                if (!(!bookId || isNaN(bookId))) {\n                  _context5.next = 5;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_5__[\"ErrorWithHttpCode\"](400, \"Book params are invalid\");\n\n              case 5:\n                validated = Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_4__[\"tokenInterceptor\"])(request);\n                _context5.next = 8;\n                return this.userBooksService.deleteBookFromCollection(validated.id, bookId);\n\n              case 8:\n                result = _context5.sent;\n                response.json(result);\n                _context5.next = 15;\n                break;\n\n              case 12:\n                _context5.prev = 12;\n                _context5.t0 = _context5[\"catch\"](0);\n                response.status(_context5.t0.httpCode).json({\n                  httpCode: _context5.t0.httpCode,\n                  message: _context5.t0.userMessage\n                });\n\n              case 15:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[0, 12]]);\n      }));\n\n      function deleteBook(_x9, _x10) {\n        return _deleteBook.apply(this, arguments);\n      }\n\n      return deleteBook;\n    }()\n  }, {\n    key: \"setFavorite\",\n    value: function () {\n      var _setFavorite = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(request, response) {\n        var book, validated, result;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                console.log(\"Favorite book request accepted\");\n                book = request.body.book;\n\n                if (book) {\n                  _context6.next = 5;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_5__[\"ErrorWithHttpCode\"](400, \"Invalid parameter\");\n\n              case 5:\n                validated = Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_4__[\"tokenInterceptor\"])(request);\n                _context6.next = 8;\n                return this.userBooksService.setFavorite(validated.id, book);\n\n              case 8:\n                result = _context6.sent;\n                response.json(result);\n                _context6.next = 15;\n                break;\n\n              case 12:\n                _context6.prev = 12;\n                _context6.t0 = _context6[\"catch\"](0);\n                response.status(_context6.t0.httpCode).json({\n                  httpCode: _context6.t0.httpCode,\n                  message: _context6.t0.userMessage\n                });\n\n              case 15:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[0, 12]]);\n      }));\n\n      function setFavorite(_x11, _x12) {\n        return _setFavorite.apply(this, arguments);\n      }\n\n      return setFavorite;\n    }()\n  }, {\n    key: \"getFavoriteBooks\",\n    value: function () {\n      var _getFavoriteBooks = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(request, response) {\n        var validated, result;\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                console.log(\"Get favorite books request accepted\");\n                validated = Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_4__[\"tokenInterceptor\"])(request);\n                _context7.next = 5;\n                return this.userBooksService.getFavorites(validated.id);\n\n              case 5:\n                result = _context7.sent;\n                response.json(result);\n                _context7.next = 12;\n                break;\n\n              case 9:\n                _context7.prev = 9;\n                _context7.t0 = _context7[\"catch\"](0);\n                response.status(_context7.t0.httpCode).json({\n                  httpCode: _context7.t0.httpCode,\n                  message: _context7.t0.userMessage\n                });\n\n              case 12:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 9]]);\n      }));\n\n      function getFavoriteBooks(_x13, _x14) {\n        return _getFavoriteBooks.apply(this, arguments);\n      }\n\n      return getFavoriteBooks;\n    }()\n  }, {\n    key: \"updateBook\",\n    value: function () {\n      var _updateBook = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(request, response) {\n        var book, validated, result;\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                console.log(\"Update Book request accepted\");\n                book = request.body.book;\n\n                if (book) {\n                  _context8.next = 5;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_5__[\"ErrorWithHttpCode\"](400, \"Invalid parameter\");\n\n              case 5:\n                validated = Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_4__[\"tokenInterceptor\"])(request);\n                _context8.next = 8;\n                return this.userBooksService.updateBook(validated.id, book);\n\n              case 8:\n                result = _context8.sent;\n                response.json(result);\n                _context8.next = 15;\n                break;\n\n              case 12:\n                _context8.prev = 12;\n                _context8.t0 = _context8[\"catch\"](0);\n                response.status(_context8.t0.httpCode).json({\n                  httpCode: _context8.t0.httpCode,\n                  message: _context8.t0.userMessage\n                });\n\n              case 15:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[0, 12]]);\n      }));\n\n      function updateBook(_x15, _x16) {\n        return _updateBook.apply(this, arguments);\n      }\n\n      return updateBook;\n    }()\n  }, {\n    key: \"getUserGenres\",\n    value: function () {\n      var _getUserGenres = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9(request, response) {\n        var validated, result;\n        return regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                console.log(\"GET User Genres request accepted\");\n                validated = Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_4__[\"tokenInterceptor\"])(request);\n                _context9.next = 5;\n                return this.userBooksService.getUserGenres(validated.id);\n\n              case 5:\n                result = _context9.sent;\n                response.json(result);\n                _context9.next = 12;\n                break;\n\n              case 9:\n                _context9.prev = 9;\n                _context9.t0 = _context9[\"catch\"](0);\n                response.status(_context9.t0.httpCode).json({\n                  httpCode: _context9.t0.httpCode,\n                  message: _context9.t0.userMessage\n                });\n\n              case 12:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[0, 9]]);\n      }));\n\n      function getUserGenres(_x17, _x18) {\n        return _getUserGenres.apply(this, arguments);\n      }\n\n      return getUserGenres;\n    }()\n  }, {\n    key: \"savePrivateBook\",\n    value: function () {\n      var _savePrivateBook = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10(request, response) {\n        var validated, book, cover, result;\n        return regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                console.log(\"Save User's private book request accepted\");\n                _context10.prev = 1;\n                validated = Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_4__[\"tokenInterceptor\"])(request);\n                book = request.body;\n                cover = request.file;\n                console.log(book);\n                console.log(cover);\n                _context10.next = 9;\n                return this.privateBookService.saveUserBook(validated.id, book, cover);\n\n              case 9:\n                result = _context10.sent;\n                response.json(result);\n                _context10.next = 16;\n                break;\n\n              case 13:\n                _context10.prev = 13;\n                _context10.t0 = _context10[\"catch\"](1);\n                response.status(_context10.t0.httpCode).json({\n                  httpCode: _context10.t0.httpCode,\n                  message: _context10.t0.userMessage\n                });\n\n              case 16:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this, [[1, 13]]);\n      }));\n\n      function savePrivateBook(_x19, _x20) {\n        return _savePrivateBook.apply(this, arguments);\n      }\n\n      return savePrivateBook;\n    }()\n  }, {\n    key: \"getAllPrivateBooks\",\n    value: function () {\n      var _getAllPrivateBooks = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee11(request, response) {\n        var validated, result;\n        return regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                console.log(\"GET User's private books request accepted\");\n                _context11.prev = 1;\n                validated = Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_4__[\"tokenInterceptor\"])(request);\n                _context11.next = 5;\n                return this.privateBookService.getPrivateBooks(validated.id);\n\n              case 5:\n                result = _context11.sent;\n                response.json(result);\n                _context11.next = 12;\n                break;\n\n              case 9:\n                _context11.prev = 9;\n                _context11.t0 = _context11[\"catch\"](1);\n                response.status(_context11.t0.httpCode).json({\n                  httpCode: _context11.t0.httpCode,\n                  message: _context11.t0.userMessage\n                });\n\n              case 12:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this, [[1, 9]]);\n      }));\n\n      function getAllPrivateBooks(_x21, _x22) {\n        return _getAllPrivateBooks.apply(this, arguments);\n      }\n\n      return getAllPrivateBooks;\n    }()\n  }, {\n    key: \"getPrivateBookById\",\n    value: function () {\n      var _getPrivateBookById = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee12(request, response) {\n        var validated, bookFid, result;\n        return regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                console.log(\"Get User's private book By Id\");\n                _context12.prev = 1;\n                validated = Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_4__[\"tokenInterceptor\"])(request);\n                bookFid = request.params.id;\n                _context12.next = 6;\n                return this.privateBookService.getPrivateBookById(validated.id, bookFid);\n\n              case 6:\n                result = _context12.sent;\n                response.json(result);\n                _context12.next = 13;\n                break;\n\n              case 10:\n                _context12.prev = 10;\n                _context12.t0 = _context12[\"catch\"](1);\n                response.status(_context12.t0.httpCode).json({\n                  httpCode: _context12.t0.httpCode,\n                  message: _context12.t0.userMessage\n                });\n\n              case 13:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this, [[1, 10]]);\n      }));\n\n      function getPrivateBookById(_x23, _x24) {\n        return _getPrivateBookById.apply(this, arguments);\n      }\n\n      return getPrivateBookById;\n    }()\n  }, {\n    key: \"removePrivateBook\",\n    value: function () {\n      var _removePrivateBook = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee13(request, response) {\n        var validated, bookFid, url, result;\n        return regeneratorRuntime.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                console.log(\"Delete User's private book request accepted\");\n                _context13.prev = 1;\n                validated = Object(_http_interceptors__WEBPACK_IMPORTED_MODULE_4__[\"tokenInterceptor\"])(request);\n                bookFid = request.query.id;\n                url = request.query.url;\n                console.log(url);\n                _context13.next = 8;\n                return this.privateBookService.removePrivateBook(validated.id, bookFid, url);\n\n              case 8:\n                result = _context13.sent;\n                response.json(result);\n                _context13.next = 15;\n                break;\n\n              case 12:\n                _context13.prev = 12;\n                _context13.t0 = _context13[\"catch\"](1);\n                response.status(_context13.t0.httpCode).json({\n                  httpCode: _context13.t0.httpCode,\n                  message: _context13.t0.userMessage\n                });\n\n              case 15:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this, [[1, 12]]);\n      }));\n\n      function removePrivateBook(_x25, _x26) {\n        return _removePrivateBook.apply(this, arguments);\n      }\n\n      return removePrivateBook;\n    }()\n  }]);\n\n  return UserController;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new UserController(userService, userBooksService, privateBookService));\n\n//# sourceURL=webpack:///./api/controllers/userController.js?");

/***/ }),

/***/ "./api/error/ErrorWithHttpCode.js":
/*!****************************************!*\
  !*** ./api/error/ErrorWithHttpCode.js ***!
  \****************************************/
/*! exports provided: ErrorWithHttpCode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ErrorWithHttpCode\", function() { return ErrorWithHttpCode; });\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar ErrorWithHttpCode = /*#__PURE__*/function (_Error) {\n  _inherits(ErrorWithHttpCode, _Error);\n\n  var _super = _createSuper(ErrorWithHttpCode);\n\n  function ErrorWithHttpCode(httpCode, message) {\n    var _this;\n\n    _classCallCheck(this, ErrorWithHttpCode);\n\n    for (var _len = arguments.length, params = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      params[_key - 2] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(params));\n    _this.httpCode = httpCode;\n    _this.userMessage = message;\n    return _this;\n  }\n\n  return ErrorWithHttpCode;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\n//# sourceURL=webpack:///./api/error/ErrorWithHttpCode.js?");

/***/ }),

/***/ "./api/firebase.config.js":
/*!********************************!*\
  !*** ./api/firebase.config.js ***!
  \********************************/
/*! exports provided: firebaseConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"firebaseConfig\", function() { return firebaseConfig; });\nvar firebaseConfig = {\n  apiKey: \"AIzaSyBJquLDDsi6VJl8kJQ8zRqAHHyGG0SLD9o\",\n  authDomain: \"bookshelf-a2203.firebaseapp.com\",\n  databaseURL: \"https://bookshelf-a2203.firebaseio.com\",\n  projectId: \"bookshelf-a2203\",\n  storageBucket: \"bookshelf-a2203.appspot.com\",\n  messagingSenderId: \"942217212778\",\n  appId: \"1:942217212778:web:2795a60ea9260c875f6b13\",\n  measurementId: \"G-SV2WRHQ6G2\"\n};\n\n//# sourceURL=webpack:///./api/firebase.config.js?");

/***/ }),

/***/ "./api/http/interceptors.js":
/*!**********************************!*\
  !*** ./api/http/interceptors.js ***!
  \**********************************/
/*! exports provided: tokenInterceptor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"tokenInterceptor\", function() { return tokenInterceptor; });\n/* harmony import */ var _services_tokenService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/tokenService */ \"./api/services/tokenService.js\");\n\nvar tokenService = new _services_tokenService__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\nfunction tokenInterceptor(request) {\n  var token = request.headers[\"x-access-token\"];\n  return tokenService.validateToken(token);\n}\n\n//# sourceURL=webpack:///./api/http/interceptors.js?");

/***/ }),

/***/ "./api/model/Book.js":
/*!***************************!*\
  !*** ./api/model/Book.js ***!
  \***************************/
/*! exports provided: Book */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Book\", function() { return Book; });\n/* harmony import */ var _UserData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UserData */ \"./api/model/UserData.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\nvar Book = function Book(isbn, id, title, imgUrl, smallImgUrl, desc, pubYear, goodreadsRating, pages, authors, series, genres) {\n  _classCallCheck(this, Book);\n\n  this.isbn = isbn;\n  this.id = id;\n  this.title = title;\n  this.imageUrl = imgUrl;\n  this.smallImageUrl = smallImgUrl;\n  this.description = desc;\n  this.publishedYear = pubYear;\n  this.goodreadsRating = goodreadsRating;\n  this.pages = pages;\n  this.authors = authors;\n  this.series = series;\n  this.genres = genres;\n  this.userData = new _UserData__WEBPACK_IMPORTED_MODULE_0__[\"UserData\"]();\n};\n\n//# sourceURL=webpack:///./api/model/Book.js?");

/***/ }),

/***/ "./api/model/UserData.js":
/*!*******************************!*\
  !*** ./api/model/UserData.js ***!
  \*******************************/
/*! exports provided: UserData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UserData\", function() { return UserData; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar UserData = function UserData() {\n  _classCallCheck(this, UserData);\n\n  this.status = \"not reading\";\n  this.rating = 0;\n  this.pagesRead = 0;\n  this.isFavorited = false;\n  this.finishTimes = [];\n  this.notes = \"\";\n};\n\n//# sourceURL=webpack:///./api/model/UserData.js?");

/***/ }),

/***/ "./api/routes/routes.js":
/*!******************************!*\
  !*** ./api/routes/routes.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _controllers_authController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../controllers/authController */ \"./api/controllers/authController.js\");\n/* harmony import */ var _controllers_bookController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../controllers/bookController */ \"./api/controllers/bookController.js\");\n/* harmony import */ var _controllers_userController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../controllers/userController */ \"./api/controllers/userController.js\");\n/* harmony import */ var _controllers_seriesController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../controllers/seriesController */ \"./api/controllers/seriesController.js\");\n/* harmony import */ var _controllers_authorController__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../controllers/authorController */ \"./api/controllers/authorController.js\");\n/* harmony import */ var _controllers_feedController__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../controllers/feedController */ \"./api/controllers/feedController.js\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! multer */ \"multer\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\n\n\nvar upload = multer__WEBPACK_IMPORTED_MODULE_6___default()();\n/* harmony default export */ __webpack_exports__[\"default\"] = (function (app) {\n  app.post(\"/auth/login\", _controllers_authController__WEBPACK_IMPORTED_MODULE_0__[\"default\"].signInUser);\n  app.post(\"/auth/register\", _controllers_authController__WEBPACK_IMPORTED_MODULE_0__[\"default\"].signUpUser);\n  app.post(\"/auth/google/login\", _controllers_authController__WEBPACK_IMPORTED_MODULE_0__[\"default\"].signInWithGoogle);\n  app.get(\"/auth/twitter/url\", _controllers_authController__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getRequestUrl);\n  app.post(\"/auth/twitter/login\", _controllers_authController__WEBPACK_IMPORTED_MODULE_0__[\"default\"].signInWithTwitter);\n  app.get(\"/books/search\", _controllers_bookController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].searchByTitleOrAuthor);\n  app.get(\"/books/:bookId\", _controllers_bookController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getBookById);\n  app.get(\"/user\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getUser);\n  app.get(\"/user/books\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getUserBooks);\n  app.get(\"/user/books/favorite\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getFavoriteBooks);\n  app.post(\"/user/books/favorite\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].setFavorite);\n  app.get(\"/user/books/:collection\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getCollection);\n  app.post(\"/user/books/:collection\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].addToCollection);\n  app[\"delete\"](\"/user/books\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].deleteBook);\n  app.put(\"/user/books\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateBook);\n  app.get(\"/user/genres\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getUserGenres);\n  app.get(\"/user/feed\", _controllers_feedController__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getFeed);\n  app.get(\"/series/:id\", _controllers_seriesController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getSeriesById);\n  app.get(\"/author/:id\", _controllers_authorController__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getAuthorInfo);\n  app.get(\"/author/:id/books\", _controllers_authorController__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getAuthorBooks);\n  app.get(\"/author/:id/series\", _controllers_authorController__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getAuthorSeries);\n  app.get(\"/user/upload\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getAllPrivateBooks);\n  app.get(\"/user/upload/:id\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getPrivateBookById);\n  app.post(\"/user/upload\", upload.single(\"cover\"), _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].savePrivateBook);\n  app[\"delete\"](\"/user/upload\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].removePrivateBook);\n});\n\n//# sourceURL=webpack:///./api/routes/routes.js?");

/***/ }),

/***/ "./api/server.js":
/*!***********************!*\
  !*** ./api/server.js ***!
  \***********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_stable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/stable */ \"core-js/stable\");\n/* harmony import */ var core_js_stable__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_stable__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! regenerator-runtime/runtime */ \"regenerator-runtime/runtime\");\n/* harmony import */ var regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var body_parser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! body-parser */ \"body-parser\");\n/* harmony import */ var body_parser__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(body_parser__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! cors */ \"cors\");\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(cors__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _routes_routes_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./routes/routes.js */ \"./api/routes/routes.js\");\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! firebase/app */ \"firebase/app\");\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(firebase_app__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _firebase_config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./firebase.config */ \"./api/firebase.config.js\");\n\n\n\n\n\n\n\n\n\nglobal.XMLHttpRequest = __webpack_require__(/*! xhr2 */ \"xhr2\"); // So firebase storage has weird XMLHttpRequest is not defined error, this is a workaround\n\nvar app = express__WEBPACK_IMPORTED_MODULE_3___default()();\nvar port = process.env.PORT;\n\nif (port == null || port == \"\") {\n  port = 4200;\n}\n\napp.use(cors__WEBPACK_IMPORTED_MODULE_5___default()());\napp.use(body_parser__WEBPACK_IMPORTED_MODULE_4___default.a.urlencoded({\n  extended: false\n}));\napp.use(body_parser__WEBPACK_IMPORTED_MODULE_4___default.a.json());\nObject(_routes_routes_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(app);\nfirebase_app__WEBPACK_IMPORTED_MODULE_7___default.a.initializeApp(_firebase_config__WEBPACK_IMPORTED_MODULE_8__[\"firebaseConfig\"]); // DO i still need this? i use cors, but in case it fucking breaks again...\n// app.all(\"/*\", function (req, res, next) {\n//   res.header(\"Access-Control-Allow-Origin\", \"*\");\n//   res.header(\"Access-Control-Allow-Methods\", \"GET,PUT,POST,DELETE,OPTIONS\");\n//   res.header(\"Access-Control-Allow-Headers\", \"x-access-token\");\n//   next();\n// });\n\napp.listen(port, function () {\n  return console.log(\"Started on port \".concat(port, \"!\"));\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (app);\n\n//# sourceURL=webpack:///./api/server.js?");

/***/ }),

/***/ "./api/services/authService.js":
/*!*************************************!*\
  !*** ./api/services/authService.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase */ \"firebase\");\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(firebase__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\n/* harmony import */ var _errorHanding__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./errorHanding */ \"./api/services/errorHanding.js\");\n/* harmony import */ var oauth__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! oauth */ \"oauth\");\n/* harmony import */ var oauth__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(oauth__WEBPACK_IMPORTED_MODULE_4__);\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\n\nvar AuthService = /*#__PURE__*/function () {\n  function AuthService(tokenService) {\n    _classCallCheck(this, AuthService);\n\n    this.tokenService = tokenService;\n    this.consumer = new oauth__WEBPACK_IMPORTED_MODULE_4___default.a.OAuth(\"https://twitter.com/oauth/request_token\", \"https://twitter.com/oauth/access_token\", process.env.TWITTER_KEY, process.env.TWITTER_SECRET, \"1.0A\", \"http://localhost:8000/login\", \"HMAC-SHA1\");\n  }\n\n  _createClass(AuthService, [{\n    key: \"test\",\n    value: function () {\n      var _test = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(id) {\n        var snap;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth().currentUser) {\n                  console.log(firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth().currentUser.uid);\n                } else {\n                  console.log(\"nothinf is authenticated\");\n                }\n\n                _context.next = 3;\n                return firebase__WEBPACK_IMPORTED_MODULE_1___default.a.firestore().collection(\"users\").doc(id).get();\n\n              case 3:\n                snap = _context.sent;\n\n                if (!snap.exists) {\n                  _context.next = 6;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", snap.data());\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function test(_x) {\n        return _test.apply(this, arguments);\n      }\n\n      return test;\n    }()\n  }, {\n    key: \"getUserProfile\",\n    value: function () {\n      var _getUserProfile = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(id) {\n        var snapshot, existingUser;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return firebase__WEBPACK_IMPORTED_MODULE_1___default.a.firestore().collection(\"users\").doc(id).get();\n\n              case 2:\n                snapshot = _context2.sent;\n\n                if (snapshot.exists) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", null);\n\n              case 5:\n                existingUser = snapshot.data();\n                existingUser.id = id;\n                return _context2.abrupt(\"return\", existingUser);\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getUserProfile(_x2) {\n        return _getUserProfile.apply(this, arguments);\n      }\n\n      return getUserProfile;\n    }()\n  }, {\n    key: \"createToken\",\n    value: function createToken(userId, email) {\n      return this.tokenService.createToken({\n        id: userId,\n        email: email\n      }, 2592000); //30 days\n    }\n  }, {\n    key: \"getUser\",\n    value: function () {\n      var _getUser = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(email, password) {\n        var id, user;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth().setPersistence(firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth.Auth.Persistence.NONE);\n\n              case 3:\n                _context3.next = 5;\n                return firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth().signInWithEmailAndPassword(email, password);\n\n              case 5:\n                id = firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth().currentUser.uid;\n                _context3.next = 8;\n                return this.getUserProfile(id);\n\n              case 8:\n                user = _context3.sent;\n\n                if (user) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](404, \"User with email \".concat(email, \" does not exist!\"));\n\n              case 11:\n                return _context3.abrupt(\"return\", _objectSpread(_objectSpread({}, user), {}, {\n                  token: this.createToken(id, email)\n                }));\n\n              case 14:\n                _context3.prev = 14;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.log(_context3.t0);\n                _errorHanding__WEBPACK_IMPORTED_MODULE_3__[\"default\"].authErrorHandler(_context3.t0, \"Someting went wrong while signing you in! Try again!\");\n\n              case 18:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 14]]);\n      }));\n\n      function getUser(_x3, _x4) {\n        return _getUser.apply(this, arguments);\n      }\n\n      return getUser;\n    }()\n  }, {\n    key: \"createUser\",\n    value: function () {\n      var _createUser = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(email, password) {\n        var uid, saved;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth().setPersistence(firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth.Auth.Persistence.NONE);\n\n              case 3:\n                _context4.next = 5;\n                return firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth().createUserWithEmailAndPassword(email, password);\n\n              case 5:\n                uid = firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth().currentUser.uid;\n                _context4.next = 8;\n                return this.saveUser(email, uid);\n\n              case 8:\n                saved = _context4.sent;\n                return _context4.abrupt(\"return\", _objectSpread({}, saved));\n\n              case 12:\n                _context4.prev = 12;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.log(_context4.t0);\n                _errorHanding__WEBPACK_IMPORTED_MODULE_3__[\"default\"].authErrorHandler(_context4.t0, \"Ooops! Something went wrong while creating your account! Try again.\");\n\n              case 16:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 12]]);\n      }));\n\n      function createUser(_x5, _x6) {\n        return _createUser.apply(this, arguments);\n      }\n\n      return createUser;\n    }()\n  }, {\n    key: \"saveUser\",\n    value: function () {\n      var _saveUser = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(email, uid) {\n        var newUser, doc, token;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                newUser = {\n                  email: email\n                };\n                doc = firebase__WEBPACK_IMPORTED_MODULE_1___default.a.firestore().collection(\"users\").doc(uid);\n                _context5.next = 4;\n                return doc.set(newUser);\n\n              case 4:\n                newUser.id = uid;\n                token = this.createToken(uid, email);\n                return _context5.abrupt(\"return\", _objectSpread(_objectSpread({}, newUser), {}, {\n                  token: token\n                }));\n\n              case 7:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function saveUser(_x7, _x8) {\n        return _saveUser.apply(this, arguments);\n      }\n\n      return saveUser;\n    }()\n  }, {\n    key: \"signInGoogle\",\n    value: function () {\n      var _signInGoogle = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(token) {\n        var credential, fbUser, user, existingUser, _token, newUser;\n\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                _context6.next = 3;\n                return firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth().setPersistence(firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth.Auth.Persistence.NONE);\n\n              case 3:\n                credential = firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth.GoogleAuthProvider.credential(token);\n                _context6.next = 6;\n                return firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth().signInWithCredential(credential);\n\n              case 6:\n                fbUser = _context6.sent;\n                user = fbUser.user;\n\n                if (!user.email) {\n                  _context6.next = 21;\n                  break;\n                }\n\n                _context6.next = 11;\n                return this.getUserProfile(user.uid);\n\n              case 11:\n                existingUser = _context6.sent;\n                _token = this.createToken(user.uid, user.email);\n\n                if (!existingUser) {\n                  _context6.next = 15;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", _objectSpread(_objectSpread({}, existingUser), {}, {\n                  token: _token\n                }));\n\n              case 15:\n                _context6.next = 17;\n                return this.saveUser(user.email, user.uid);\n\n              case 17:\n                newUser = _context6.sent;\n                return _context6.abrupt(\"return\", _objectSpread({}, newUser));\n\n              case 21:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](500, \"Failed to authenticate Google user\");\n\n              case 22:\n                _context6.next = 28;\n                break;\n\n              case 24:\n                _context6.prev = 24;\n                _context6.t0 = _context6[\"catch\"](0);\n                console.log(_context6.t0); //Since Google is more 'trusted' than others providers, it will override every other sign-in provider\n\n                _errorHanding__WEBPACK_IMPORTED_MODULE_3__[\"default\"].authErrorHandler(_context6.t0, \"Ooops! Something went wrong while linking your Google account! Try again.\");\n\n              case 28:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[0, 24]]);\n      }));\n\n      function signInGoogle(_x9) {\n        return _signInGoogle.apply(this, arguments);\n      }\n\n      return signInGoogle;\n    }()\n  }, {\n    key: \"getAuthorizeUrl\",\n    value: function getAuthorizeUrl() {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        _this.consumer.getOAuthRequestToken(function (error, token, tokenSecret) {\n          if (error) {\n            reject(new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](500, \"Failed to get request token\"));\n          }\n\n          resolve({\n            url: \"https://api.twitter.com/oauth/authorize?oauth_token=\".concat(token)\n          });\n        });\n      });\n    }\n  }, {\n    key: \"getAccessToken\",\n    value: function getAccessToken(reqToken, verifier) {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this2.consumer.getOAuthAccessToken(reqToken, process.env.TWITTER_SECRET, verifier, function (error, accessToken, accessTokenSecret) {\n          if (error) {\n            reject(new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](500, \"Failed to get access token\"));\n          }\n\n          resolve({\n            token: accessToken,\n            secret: accessTokenSecret\n          });\n        });\n      });\n    }\n  }, {\n    key: \"signInTwitter\",\n    value: function () {\n      var _signInTwitter = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(token, secret) {\n        var credential, fbUser, user, existingUser, _token2, newUser;\n\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                _context7.next = 3;\n                return firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth().setPersistence(firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth.Auth.Persistence.NONE);\n\n              case 3:\n                credential = firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth.TwitterAuthProvider.credential(token, secret);\n                _context7.next = 6;\n                return firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth().signInWithCredential(credential);\n\n              case 6:\n                fbUser = _context7.sent;\n                user = fbUser.user;\n\n                if (!user.email) {\n                  _context7.next = 21;\n                  break;\n                }\n\n                _context7.next = 11;\n                return this.getUserProfile(user.uid);\n\n              case 11:\n                existingUser = _context7.sent;\n                _token2 = this.createToken(user.uid, user.email);\n\n                if (!existingUser) {\n                  _context7.next = 15;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", _objectSpread(_objectSpread({}, existingUser), {}, {\n                  token: _token2\n                }));\n\n              case 15:\n                _context7.next = 17;\n                return this.saveUser(user.email, user.uid);\n\n              case 17:\n                newUser = _context7.sent;\n                return _context7.abrupt(\"return\", _objectSpread({}, newUser));\n\n              case 21:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](500, \"Failed to authenticate Twitter user\");\n\n              case 22:\n                _context7.next = 27;\n                break;\n\n              case 24:\n                _context7.prev = 24;\n                _context7.t0 = _context7[\"catch\"](0);\n                _errorHanding__WEBPACK_IMPORTED_MODULE_3__[\"default\"].authErrorHandler(_context7.t0, message || \"Ooops! Something went wrong while linking your Twitter account! Try again.\");\n\n              case 27:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 24]]);\n      }));\n\n      function signInTwitter(_x10, _x11) {\n        return _signInTwitter.apply(this, arguments);\n      }\n\n      return signInTwitter;\n    }()\n  }]);\n\n  return AuthService;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AuthService);\n\n//# sourceURL=webpack:///./api/services/authService.js?");

/***/ }),

/***/ "./api/services/errorHanding.js":
/*!**************************************!*\
  !*** ./api/services/errorHanding.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  authErrorHandler: function authErrorHandler(error) {\n    var defaultMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"Someting went wrong. Try again.\";\n    var errorMessage;\n    var httpCode = 500;\n    if (error.userMessage) throw error;\n    if (!error.code) throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_0__[\"ErrorWithHttpCode\"](httpCode, defaultMessage);\n\n    if (error.code === \"auth/email-already-in-use\") {\n      errorMessage = \"The email is already in use\";\n    } else if (error.code === \"auth/invalid-email\") {\n      errorMessage = \"Invalid email\";\n      httpCode = 400;\n    } else if (error.code === \"auth/weak-password\") {\n      errorMessage = \"Password must be at least 6 symbols long\";\n      httpCode = 400;\n    } else if (error.code === \"auth/user-disabled\") {\n      errorMessage = \"Account with given email has been disabled.\";\n    } else if (error.code === \"auth/user-not-found\") {\n      errorMessage = \"User with that email does not exist!\";\n      httpCode = 404;\n    } else if (error.code === \"auth/wrong-password\") {\n      errorMessage = \"Incorrect password!\";\n    } else if (error.code.includes(\"different-credential\")) {\n      errorMessage = \"Email is already associated with another account\";\n    } else {\n      errorMessage = defaultMessage;\n    }\n\n    throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_0__[\"ErrorWithHttpCode\"](httpCode, errorMessage);\n  }\n});\n\n//# sourceURL=webpack:///./api/services/errorHanding.js?");

/***/ }),

/***/ "./api/services/feedService.js":
/*!*************************************!*\
  !*** ./api/services/feedService.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ \"moment\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase */ \"firebase\");\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(firebase__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar actions = {\n  \"2read\": \"Will be reading\",\n  finished: \"Finished\",\n  stopped: \"Stopped reading\",\n  update: \"Has read\",\n  rating: \"Has rated\",\n  reading: \"Started reading\",\n  not: \"Not reading\"\n};\nvar dateFormat = \"DD MMM YYYY\";\nvar errorMsg = \"Something went wrong while retrieving user feed\";\n\nvar FeedService = /*#__PURE__*/function () {\n  function FeedService() {\n    _classCallCheck(this, FeedService);\n  }\n\n  _createClass(FeedService, [{\n    key: \"generateFeed\",\n    value: function generateFeed(book, action, _ref) {\n      var pages = _ref.pages,\n          rating = _ref.rating;\n\n      if (!actions[action] || !book || book.id === \"\" || book.title === \"\") {\n        return null;\n      }\n\n      return {\n        date: moment__WEBPACK_IMPORTED_MODULE_0___default()().format(dateFormat),\n        message: \"\".concat(actions[action], \" \").concat(pages ? pages + \" pages of \" : \"\"),\n        data: {\n          id: book.id,\n          title: book.title,\n          rating: rating || null\n        }\n      };\n    }\n  }, {\n    key: \"saveFeed\",\n    value: function () {\n      var _saveFeed = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(book, action, userId) {\n        var config,\n            feed,\n            userFeedCollection,\n            _args = arguments;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                config = _args.length > 3 && _args[3] !== undefined ? _args[3] : {};\n                feed = this.generateFeed(book, action, config);\n\n                if (!feed) {\n                  _context.next = 14;\n                  break;\n                }\n\n                _context.prev = 3;\n                userFeedCollection = this.getUserFeedAsFBCollection(userId);\n                _context.next = 7;\n                return userFeedCollection.doc().set(_objectSpread(_objectSpread({}, feed), {}, {\n                  timestamp: firebase__WEBPACK_IMPORTED_MODULE_1___default.a.firestore.FieldValue.serverTimestamp()\n                }));\n\n              case 7:\n                _context.next = 14;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](3);\n\n                if (!_context.t0.userMessage) {\n                  _context.next = 13;\n                  break;\n                }\n\n                throw _context.t0;\n\n              case 13:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](500, \"Something went wrong while recording user feed\");\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[3, 9]]);\n      }));\n\n      function saveFeed(_x, _x2, _x3) {\n        return _saveFeed.apply(this, arguments);\n      }\n\n      return saveFeed;\n    }()\n  }, {\n    key: \"getUserFeedAsFBCollection\",\n    value: function getUserFeedAsFBCollection(userId) {\n      return firebase__WEBPACK_IMPORTED_MODULE_1___default.a.firestore().collection(\"users\").doc(userId).collection(\"feed\");\n    }\n  }, {\n    key: \"getAllUserFeed\",\n    value: function () {\n      var _getAllUserFeed = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(userId) {\n        var feed;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.retrieveUserFeed(userId);\n\n              case 2:\n                feed = _context2.sent;\n\n                if (feed) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", {});\n\n              case 5:\n                return _context2.abrupt(\"return\", this.formatFeed(feed));\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getAllUserFeed(_x4) {\n        return _getAllUserFeed.apply(this, arguments);\n      }\n\n      return getAllUserFeed;\n    }()\n  }, {\n    key: \"getUserFeedByDate\",\n    value: function () {\n      var _getUserFeedByDate = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(userId, date) {\n        var momentDate, feed, formatted, key;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                momentDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(date, dateFormat);\n\n                if (momentDate) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](400, \"Invalid date parameter\");\n\n              case 3:\n                _context3.next = 5;\n                return this.retrieveUserFeed(userId);\n\n              case 5:\n                feed = _context3.sent;\n\n                if (feed) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", {});\n\n              case 8:\n                formatted = this.formatFeed(feed);\n                key = Object.keys(formatted).find(function (key) {\n                  var compareDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(key, dateFormat);\n                  return momentDate.isSame(compareDate, \"days\");\n                });\n\n                if (key) {\n                  _context3.next = 12;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", {});\n\n              case 12:\n                return _context3.abrupt(\"return\", _defineProperty({}, key, formatted[key]));\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getUserFeedByDate(_x5, _x6) {\n        return _getUserFeedByDate.apply(this, arguments);\n      }\n\n      return getUserFeedByDate;\n    }()\n  }, {\n    key: \"retrieveUserFeed\",\n    value: function () {\n      var _retrieveUserFeed = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(userId) {\n        var userFeedCollection, snapshot;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                userFeedCollection = this.getUserFeedAsFBCollection(userId);\n                _context4.next = 4;\n                return userFeedCollection.orderBy(\"timestamp\", \"desc\").get();\n\n              case 4:\n                snapshot = _context4.sent;\n\n                if (!snapshot.empty) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", null);\n\n              case 9:\n                return _context4.abrupt(\"return\", snapshot.docs.map(function (doc) {\n                  return doc.data();\n                }));\n\n              case 10:\n                _context4.next = 15;\n                break;\n\n              case 12:\n                _context4.prev = 12;\n                _context4.t0 = _context4[\"catch\"](0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](500, errorMsg);\n\n              case 15:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 12]]);\n      }));\n\n      function retrieveUserFeed(_x7) {\n        return _retrieveUserFeed.apply(this, arguments);\n      }\n\n      return retrieveUserFeed;\n    }()\n  }, {\n    key: \"formatFeed\",\n    value: function formatFeed(feed) {\n      var clean = this.cleanFeed(feed);\n      var formatted = this.formatFeedByDate(clean);\n      this.mergeUpdateRecords(formatted);\n      return formatted;\n    } //remove duplicates and contradicting records\n\n  }, {\n    key: \"cleanFeed\",\n    value: function cleanFeed(feed) {\n      var recordMap = new Map();\n      var cleanFeed = feed.filter(function (value) {\n        if (value.message.includes(\"pages\")) {\n          return true;\n        }\n\n        if (recordMap.has(value.data.id)) {\n          return false;\n        } else {\n          recordMap.set(value.data.id, value);\n          return true;\n        }\n      });\n      cleanFeed.sort(compare); //reverse is simple, but compare is reliable\n\n      return cleanFeed;\n    }\n  }, {\n    key: \"formatFeedByDate\",\n    value: function formatFeedByDate(feed) {\n      var feedMap = {};\n      feed.forEach(function (item) {\n        if (!feedMap.hasOwnProperty(item.date)) {\n          feedMap[item.date] = [item];\n        } else {\n          var curRecord = feedMap[item.date];\n          curRecord.push(item);\n        }\n      });\n      return feedMap;\n    } //merging multiple 'read x pages' of same book (in the same record)\n\n  }, {\n    key: \"mergeUpdateRecords\",\n    value: function mergeUpdateRecords(feed) {\n      var _this = this;\n\n      Object.keys(feed).forEach(function (key) {\n        var filtered = feed[key].filter(function (record) {\n          return record.message.includes(\"pages\");\n        });\n        var id = \"\";\n        filtered.forEach(function (item) {\n          if (item.data.id !== id || id === \"\") {\n            id = item.data.id;\n            var sameIdRecords = filtered.filter(function (item) {\n              return item.data.id === id;\n            });\n            var pages = sameIdRecords.reduce(pageReducer, 0);\n\n            var mergeIndex = _this.getMergeIndex(feed[key], item.data.id);\n\n            var mergeCount = sameIdRecords.length;\n\n            if (pages > 0) {\n              feed[key].splice(mergeIndex, mergeCount, _this.generateFeed(item.data, \"update\", {\n                pages: pages\n              }));\n            } else {\n              feed[key].splice(mergeIndex, mergeCount);\n            }\n          }\n        });\n      });\n      return feed;\n    }\n  }, {\n    key: \"getMergeIndex\",\n    value: function getMergeIndex(collection, dataId) {\n      var ref = collection.find(function (item) {\n        return item.data.id === dataId && item.message.includes(\"pages\");\n      });\n      return collection.indexOf(ref);\n    }\n  }, {\n    key: \"isFeedClean\",\n    value: function isFeedClean(curRecord, nextRecord) {\n      return curRecord.data.id !== nextRecord.data.id || curRecord.message.includes(\"pages\") || nextRecord.message.includes(\"pages\");\n    }\n  }]);\n\n  return FeedService;\n}();\n\nvar pageReducer = function pageReducer(prevValue, curValue) {\n  return prevValue + Number.parseInt(curValue.message.replace(/[^-\\d]/g, \"\"));\n};\n\nvar compare = function compare(recordA, recordB) {\n  var dateA = moment__WEBPACK_IMPORTED_MODULE_0___default()(recordA.date, dateFormat);\n  var dateB = moment__WEBPACK_IMPORTED_MODULE_0___default()(recordB.date, dateFormat);\n  var comparison = 0;\n\n  if (dateA.isAfter(dateB)) {\n    return -1;\n  }\n\n  if (dateA.isBefore(dateB)) {\n    return 1;\n  }\n\n  return comparison;\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FeedService);\n\n//# sourceURL=webpack:///./api/services/feedService.js?");

/***/ }),

/***/ "./api/services/formatting/formatAuthorService.js":
/*!********************************************************!*\
  !*** ./api/services/formatting/formatAuthorService.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase */ \"firebase\");\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _formatBaseService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./formatBaseService */ \"./api/services/formatting/formatBaseService.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\nvar FormatAuthorService = /*#__PURE__*/function (_FormatBookService) {\n  _inherits(FormatAuthorService, _FormatBookService);\n\n  var _super = _createSuper(FormatAuthorService);\n\n  function FormatAuthorService() {\n    _classCallCheck(this, FormatAuthorService);\n\n    return _super.call(this);\n  }\n\n  _createClass(FormatAuthorService, [{\n    key: \"formatAuthorForAuthorPage\",\n    value: function formatAuthorForAuthorPage(author, books) {\n      return {\n        id: author.id._text,\n        name: author.name._text,\n        imageUrl: author.large_image_url._cdata,\n        about: this.formatDescription(author.about._cdata),\n        workCount: author.works_count._text,\n        bornDate: author.born_at._text,\n        deathDate: author.died_at._text,\n        bookIds: this.formatAuthorBooks(books)\n      };\n    }\n  }, {\n    key: \"formatAuthorMin\",\n    value: function formatAuthorMin(author) {\n      return {\n        name: author.name._text\n      };\n    }\n  }, {\n    key: \"formatAuthorBooks\",\n    value: function formatAuthorBooks(books) {\n      var authorBooks = books.book;\n      return this.mapArrayIds(authorBooks);\n    }\n  }]);\n\n  return FormatAuthorService;\n}(_formatBaseService__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FormatAuthorService);\n\n//# sourceURL=webpack:///./api/services/formatting/formatAuthorService.js?");

/***/ }),

/***/ "./api/services/formatting/formatBaseService.js":
/*!******************************************************!*\
  !*** ./api/services/formatting/formatBaseService.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar genresExceptions = [\"to-read\", \"currently-reading\", \"owned\", \"default\", \"favorites\", \"books-i-own\", \"ebook\", \"kindle\", \"library\", \"audiobook\", \"owned-books\", \"audiobooks\", \"my-books\", \"ebooks\", \"to-buy\", \"english\", \"calibre\", \"books\", \"british\", \"audio\", \"my-library\", \"favourites\", \"re-read\", \"general\", \"e-books\", \"fiction\", \"ya\", \"series\", \"classic\"];\n\nvar FormatBookService = /*#__PURE__*/function () {\n  function FormatBookService() {\n    _classCallCheck(this, FormatBookService);\n  }\n\n  _createClass(FormatBookService, [{\n    key: \"mapArrayIds\",\n    value: function mapArrayIds(array) {\n      return array.map(function (item) {\n        return item.id._text;\n      });\n    } //transform goodreads 'shelves' to genres\n    //TODO i.e Science-fiction OR Sci-fi, not BOTH\n\n  }, {\n    key: \"formatGenresForBook\",\n    value: function formatGenresForBook(shelves) {\n      var genres = shelves.filter(function (shelf) {\n        return !genresExceptions.includes(shelf._attributes.name);\n      }).map(function (genre) {\n        return genre._attributes.name.replace(/^\\w/, function (_char) {\n          return _char.toUpperCase();\n        });\n      }); //first letter toUpperCase \\fantasy => Fantasy\n\n      return genres.length > 3 ? genres.slice(0, 3) : genres;\n    }\n  }, {\n    key: \"getBookTitle\",\n    value: function getBookTitle(string) {\n      if (!string) return null;\n      var stringTitle = string;\n      var seriesSeparator = stringTitle.indexOf(\"(\");\n      var title = stringTitle.substring(0, seriesSeparator > 0 ? seriesSeparator : stringTitle.length).trim();\n      return title;\n    }\n  }, {\n    key: \"formatDescription\",\n    value: function formatDescription(descr) {\n      if (!descr) return \"\";\n      var newD = descr.replace(new RegExp(/<br\\s*\\/?>/g), \"\\n\"); //replace html line-breaks with \\n\n\n      newD = newD.replace(new RegExp(/<[^>]*>/g), \"\"); //replace all other html tags\n\n      return newD;\n    }\n  }, {\n    key: \"formatSeriesForBook\",\n    value: function formatSeriesForBook(series) {\n      if (!series) return null;\n\n      if (Array.isArray(series)) {\n        series = series[0];\n      }\n\n      var id = series.series.id._text;\n      var position = series.user_position._text ? \" #\".concat(series.user_position._text) : \"\";\n      var fullName = \"(\".concat(series.series.title._cdata.trim()).concat(position, \")\");\n      return {\n        id: id,\n        fullName: fullName\n      };\n    }\n  }, {\n    key: \"formatAuthor\",\n    value: function formatAuthor(authors) {\n      return Array.isArray(authors) ? this.getAllBookAuthors(authors) : [this.mapAuthor(authors)];\n    }\n  }, {\n    key: \"formatAuthorForSearch\",\n    value: function formatAuthorForSearch(authors) {\n      return Array.isArray(authors) ? authors[0].name._text : authors.name._text;\n    }\n  }, {\n    key: \"getAllBookAuthors\",\n    value: function getAllBookAuthors(authors) {\n      var _this = this;\n\n      return authors.filter(function (author) {\n        return !author.role._text;\n      }).map(function (author) {\n        return _this.mapAuthor(author);\n      });\n    }\n  }, {\n    key: \"mapAuthor\",\n    value: function mapAuthor(author) {\n      return {\n        id: author.id._text,\n        name: author.name._text,\n        imageUrl: author.image_url._cdata,\n        smallImageUrl: author.small_image_url._cdata,\n        goodreadsRating: author.average_rating._text\n      };\n    }\n  }, {\n    key: \"getLargeImageUrl\",\n    value: function getLargeImageUrl(url) {\n      if (!url || url.includes(\"nophoto\")) {\n        return url;\n      }\n\n      var regex = new RegExp(/._(.*?)_/g);\n      var newUrl = url.replace(regex, \"\");\n      return newUrl;\n    }\n  }]);\n\n  return FormatBookService;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FormatBookService);\n\n//# sourceURL=webpack:///./api/services/formatting/formatBaseService.js?");

/***/ }),

/***/ "./api/services/formatting/formatBookService.js":
/*!******************************************************!*\
  !*** ./api/services/formatting/formatBookService.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _formatBaseService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./formatBaseService */ \"./api/services/formatting/formatBaseService.js\");\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\n/* harmony import */ var _model_Book__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../model/Book */ \"./api/model/Book.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\nvar FormatBookService = /*#__PURE__*/function (_FormatBaseService) {\n  _inherits(FormatBookService, _FormatBaseService);\n\n  var _super = _createSuper(FormatBookService);\n\n  function FormatBookService() {\n    _classCallCheck(this, FormatBookService);\n\n    return _super.call(this);\n  }\n\n  _createClass(FormatBookService, [{\n    key: \"formatBookForSearch\",\n    value: function formatBookForSearch(book) {\n      try {\n        return {\n          id: book.id._text,\n          title: book.title._text || book.title._cdata,\n          imageUrl: this.getLargeImageUrl(book.image_url._text),\n          author: this.formatAuthorForSearch(book.author)\n        };\n      } catch (error) {\n        console.log(error);\n        throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Failed to retrieve data from book\");\n      }\n    }\n  }, {\n    key: \"formatBookForBookPage\",\n    value: function formatBookForBookPage(book) {\n      try {\n        var formatted = {\n          isbn: book.isbn13._cdata,\n          id: book.id._text,\n          title: this.getBookTitle(book.title._text) || this.getBookTitle(book.title._cdata),\n          imageUrl: this.getLargeImageUrl(book.image_url._text),\n          smallImageUrl: book.small_image_url._text,\n          description: this.formatDescription(book.description._cdata),\n          publishedYear: book.work.original_publication_year._text,\n          goodreadsRating: book.average_rating._text,\n          pages: book.num_pages._cdata\n        };\n        formatted.authors = this.formatAuthor(book.authors.author);\n        formatted.series = this.formatSeriesForBook(book.series_works.series_work);\n        formatted.genres = this.formatGenresForBook(book.popular_shelves.shelf);\n        return new _model_Book__WEBPACK_IMPORTED_MODULE_2__[\"Book\"](formatted.isbn, formatted.id, formatted.title, formatted.imageUrl, formatted.smallImageUrl, formatted.description, formatted.publishedYear, formatted.goodreadsRating, formatted.pages, formatted.authors, formatted.series, formatted.genres);\n      } catch (error) {\n        console.log(error);\n        throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Failed to retrieve data from book\");\n      }\n    }\n  }]);\n\n  return FormatBookService;\n}(_formatBaseService__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FormatBookService);\n\n//# sourceURL=webpack:///./api/services/formatting/formatBookService.js?");

/***/ }),

/***/ "./api/services/formatting/formatSeriesService.js":
/*!********************************************************!*\
  !*** ./api/services/formatting/formatSeriesService.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _formatBaseService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./formatBaseService */ \"./api/services/formatting/formatBaseService.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\nvar FormatSeriesService = /*#__PURE__*/function (_FormatBookService) {\n  _inherits(FormatSeriesService, _FormatBookService);\n\n  var _super = _createSuper(FormatSeriesService);\n\n  function FormatSeriesService() {\n    _classCallCheck(this, FormatSeriesService);\n\n    return _super.call(this);\n  }\n\n  _createClass(FormatSeriesService, [{\n    key: \"formatSeriesAuthor\",\n    value: function formatSeriesAuthor(author) {\n      return author.name._text;\n    }\n  }, {\n    key: \"formatSeriesForAuthorPage\",\n    value: function formatSeriesForAuthorPage(series) {\n      var mapped = series.filter(function (item, i, self) {\n        return i === self.findIndex(function (elem) {\n          var elemTitle = elem.series.title._cdata;\n          var itemTitle = item.series.title._cdata;\n          return elemTitle.toLowerCase() === itemTitle.toLowerCase();\n        });\n      }).map(function (item) {\n        return {\n          id: item.series.id._text,\n          title: item.series.title._cdata,\n          rating: item.work.ratings_sum._text\n        };\n      }).sort(function (a, b) {\n        return b.rating - a.rating;\n      });\n      return mapped;\n    }\n  }, {\n    key: \"formatSeriesForSeriesPage\",\n    value: function formatSeriesForSeriesPage(series) {\n      var result = {\n        id: series.id._text,\n        title: series.title._cdata,\n        workCount: series.primary_work_count._text,\n        allWorks: series.series_works_count._text\n      };\n      result.bookIds = this.formatSeriesWork(series, result.workCount);\n      return result;\n    }\n  }, {\n    key: \"formatSeriesWork\",\n    value: function formatSeriesWork(series, workCount) {\n      var seriesWork = series.series_works.series_work;\n      var result = seriesWork.slice(0, workCount);\n      return result.map(function (work) {\n        var book = work.work.best_book;\n        return book.id._text;\n      });\n    }\n  }]);\n\n  return FormatSeriesService;\n}(_formatBaseService__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FormatSeriesService);\n\n//# sourceURL=webpack:///./api/services/formatting/formatSeriesService.js?");

/***/ }),

/***/ "./api/services/goodreads/goodreadsAuthorService.js":
/*!**********************************************************!*\
  !*** ./api/services/goodreads/goodreadsAuthorService.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _goodreadsBaseService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./goodreadsBaseService */ \"./api/services/goodreads/goodreadsBaseService.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\nvar GoodreadsAuthorService = /*#__PURE__*/function (_GoodreadsBaseService) {\n  _inherits(GoodreadsAuthorService, _GoodreadsBaseService);\n\n  var _super = _createSuper(GoodreadsAuthorService);\n\n  function GoodreadsAuthorService(formatAuthorService, formatSeriesService) {\n    var _this;\n\n    _classCallCheck(this, GoodreadsAuthorService);\n\n    _this = _super.call(this);\n    _this.formatAuthorService = formatAuthorService;\n    _this.formatSeriesService = formatSeriesService;\n    return _this;\n  }\n\n  _createClass(GoodreadsAuthorService, [{\n    key: \"getAuthorByGoodreadsId\",\n    value: function () {\n      var _getAuthorByGoodreadsId = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(id) {\n        var url, converted, author, books;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                url = \"\".concat(this.root, \"author/show/\").concat(id, \"?key=\").concat(this.devKey);\n                _context.next = 4;\n                return this.getValueFromGoodreads(url);\n\n              case 4:\n                converted = _context.sent;\n                author = this.findValue(converted, \"author\");\n                books = this.findValue(converted, \"books\");\n\n                if (!(!author || !books)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                throw new ErrorWithHttpCode(404, \"Data was not found\");\n\n              case 9:\n                author = this.formatAuthorService.formatAuthorForAuthorPage(author, books);\n                return _context.abrupt(\"return\", author);\n\n              case 13:\n                _context.prev = 13;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0);\n\n                if (!_context.t0.userMessage) {\n                  _context.next = 18;\n                  break;\n                }\n\n                throw _context.t0;\n\n              case 18:\n                throw new ErrorWithHttpCode(_context.t0.httpCode || 500, _context.t0.message);\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 13]]);\n      }));\n\n      function getAuthorByGoodreadsId(_x) {\n        return _getAuthorByGoodreadsId.apply(this, arguments);\n      }\n\n      return getAuthorByGoodreadsId;\n    }()\n  }, {\n    key: \"getAuthorBooks\",\n    value: function () {\n      var _getAuthorBooks = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(id) {\n        var url, converted, author, books, arr;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                url = \"\".concat(this.root, \"author/list/\").concat(id, \"?key=\").concat(this.devKey);\n                _context2.next = 4;\n                return this.getValueFromGoodreads(url);\n\n              case 4:\n                converted = _context2.sent;\n                author = this.findValue(converted, \"author\");\n                author = this.formatAuthorService.formatAuthorMin(author);\n                books = this.findValue(converted, \"books\");\n\n                if (!(!books || books.length < 1)) {\n                  _context2.next = 10;\n                  break;\n                }\n\n                throw new ErrorWithHttpCode(404, \"Data was not found\");\n\n              case 10:\n                arr = this.formatAuthorService.formatAuthorBooks(books);\n                return _context2.abrupt(\"return\", {\n                  author: author,\n                  bookIds: arr\n                });\n\n              case 14:\n                _context2.prev = 14;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n\n                if (!_context2.t0.userMessage) {\n                  _context2.next = 19;\n                  break;\n                }\n\n                throw _context2.t0;\n\n              case 19:\n                throw new ErrorWithHttpCode(_context2.t0.httpCode || 500, _context2.t0.message);\n\n              case 20:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 14]]);\n      }));\n\n      function getAuthorBooks(_x2) {\n        return _getAuthorBooks.apply(this, arguments);\n      }\n\n      return getAuthorBooks;\n    }()\n  }, {\n    key: \"getAuthorSeries\",\n    value: function () {\n      var _getAuthorSeries = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(id) {\n        var url, converted, value, series;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                url = \"\".concat(this.root, \"series/list/\").concat(id, \".xml?key=\").concat(this.devKey);\n                _context3.next = 4;\n                return this.getValueFromGoodreads(url);\n\n              case 4:\n                converted = _context3.sent;\n                value = this.findValue(converted, \"series_work\");\n\n                if (value) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                throw new ErrorWithHttpCode(404, \"Data was not found\");\n\n              case 8:\n                series = this.formatSeriesService.formatSeriesForAuthorPage(value);\n                return _context3.abrupt(\"return\", series);\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.log(_context3.t0);\n\n                if (!_context3.t0.userMessage) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                throw _context3.t0;\n\n              case 17:\n                throw new ErrorWithHttpCode(_context3.t0.httpCode || 500, _context3.t0.message);\n\n              case 18:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 12]]);\n      }));\n\n      function getAuthorSeries(_x3) {\n        return _getAuthorSeries.apply(this, arguments);\n      }\n\n      return getAuthorSeries;\n    }()\n  }]);\n\n  return GoodreadsAuthorService;\n}(_goodreadsBaseService__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (GoodreadsAuthorService);\n\n//# sourceURL=webpack:///./api/services/goodreads/goodreadsAuthorService.js?");

/***/ }),

/***/ "./api/services/goodreads/goodreadsBaseService.js":
/*!********************************************************!*\
  !*** ./api/services/goodreads/goodreadsBaseService.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var xml_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! xml-js */ \"xml-js\");\n/* harmony import */ var xml_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(xml_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\nvar dev_key = process.env.GOODREADS_KEY;\nvar root = \"https://www.goodreads.com/\";\nvar abeBooksUrl = \"https://pictures.abebooks.com/isbn/\";\nvar defaultImgUrl = \"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png\";\n\nvar GoodreadsBaseService = /*#__PURE__*/function () {\n  function GoodreadsBaseService() {\n    _classCallCheck(this, GoodreadsBaseService);\n  }\n\n  _createClass(GoodreadsBaseService, [{\n    key: \"getValueFromGoodreads\",\n    value: function () {\n      var _getValueFromGoodreads = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(url) {\n        var response, xml, converted;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return axios__WEBPACK_IMPORTED_MODULE_1___default.a.get(url);\n\n              case 3:\n                response = _context.sent;\n\n                if (!(response.status >= 300)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_3__[\"ErrorWithHttpCode\"](response.status, \"Failed to retrieve book data\");\n\n              case 6:\n                xml = response.data;\n                converted = xml_js__WEBPACK_IMPORTED_MODULE_2___default.a.xml2js(xml, {\n                  compact: true\n                });\n                return _context.abrupt(\"return\", converted);\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](0);\n\n                if (!_context.t0.userMessage) {\n                  _context.next = 15;\n                  break;\n                }\n\n                throw _context.t0;\n\n              case 15:\n                if (!(_context.t0.response && _context.t0.response.status == 404)) {\n                  _context.next = 17;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_3__[\"ErrorWithHttpCode\"](_context.t0.response.status, \"Book was not found\");\n\n              case 17:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_3__[\"ErrorWithHttpCode\"](500, \"Something went wrong while retrieving book info!\");\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 11]]);\n      }));\n\n      function getValueFromGoodreads(_x) {\n        return _getValueFromGoodreads.apply(this, arguments);\n      }\n\n      return getValueFromGoodreads;\n    }()\n  }, {\n    key: \"getHQImage\",\n    value: function () {\n      var _getHQImage = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(url, isbn) {\n        var imageUrl, response;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                imageUrl = \"\";\n\n                if (!(url.includes(\"nophoto\") && isbn)) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                imageUrl = \"\".concat(abeBooksUrl).concat(isbn, \".jpg\");\n                _context2.prev = 3;\n                _context2.next = 6;\n                return axios__WEBPACK_IMPORTED_MODULE_1___default.a.get(imageUrl);\n\n              case 6:\n                response = _context2.sent;\n\n                if (!(response.status !== 404)) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", imageUrl);\n\n              case 9:\n                _context2.next = 14;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](3);\n                return _context2.abrupt(\"return\", defaultImgUrl);\n\n              case 14:\n                return _context2.abrupt(\"return\", url);\n\n              case 15:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[3, 11]]);\n      }));\n\n      function getHQImage(_x2, _x3) {\n        return _getHQImage.apply(this, arguments);\n      }\n\n      return getHQImage;\n    }()\n  }, {\n    key: \"findValue\",\n    value: function findValue(object, search) {\n      var _this = this;\n\n      var result;\n      Object.keys(object).some(function (key) {\n        if (key === search) {\n          result = object[key];\n          return true;\n        }\n\n        if (object[key] && _typeof(object[key]) === \"object\") {\n          result = _this.findValue(object[key], search);\n          return result !== undefined;\n        }\n      });\n      return result;\n    }\n  }, {\n    key: \"root\",\n    get: function get() {\n      return root;\n    }\n  }, {\n    key: \"devKey\",\n    get: function get() {\n      return dev_key;\n    }\n  }]);\n\n  return GoodreadsBaseService;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (GoodreadsBaseService);\n\n//# sourceURL=webpack:///./api/services/goodreads/goodreadsBaseService.js?");

/***/ }),

/***/ "./api/services/goodreads/goodreadsBookService.js":
/*!********************************************************!*\
  !*** ./api/services/goodreads/goodreadsBookService.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _goodreadsBaseService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./goodreadsBaseService */ \"./api/services/goodreads/goodreadsBaseService.js\");\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase */ \"firebase\");\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(firebase__WEBPACK_IMPORTED_MODULE_2__);\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\nvar GoodreadsBookService = /*#__PURE__*/function (_GoodreadsBaseService) {\n  _inherits(GoodreadsBookService, _GoodreadsBaseService);\n\n  var _super = _createSuper(GoodreadsBookService);\n\n  function GoodreadsBookService(formatBookService) {\n    var _this;\n\n    _classCallCheck(this, GoodreadsBookService);\n\n    _this = _super.call(this);\n    _this.formatBookService = formatBookService;\n    return _this;\n  }\n\n  _createClass(GoodreadsBookService, [{\n    key: \"searchBooks\",\n    value: function () {\n      var _searchBooks = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(searchQuery) {\n        var _this2 = this;\n\n        var searchUrl, converted, books, formatted;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                searchUrl = \"\".concat(this.root, \"search/index.xml?key=\").concat(this.devKey, \"&q=\").concat(searchQuery);\n                _context.next = 4;\n                return this.getValueFromGoodreads(searchUrl);\n\n              case 4:\n                converted = _context.sent;\n                books = this.findValue(converted, \"work\");\n\n                if (books) {\n                  _context.next = 8;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](404, \"No books can be found\");\n\n              case 8:\n                formatted = books.slice(0, 4).map(function (item) {\n                  var book = _this2.findValue(item, \"best_book\");\n\n                  return _this2.formatBookService.formatBookForSearch(book);\n                });\n                return _context.abrupt(\"return\", formatted);\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](0);\n\n                if (!_context.t0.userMessage) {\n                  _context.next = 18;\n                  break;\n                }\n\n                throw _context.t0;\n\n              case 18:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](500, \"Something went wrong while searching for book\");\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 12]]);\n      }));\n\n      function searchBooks(_x) {\n        return _searchBooks.apply(this, arguments);\n      }\n\n      return searchBooks;\n    }()\n  }, {\n    key: \"getBookWithUserData\",\n    value: function () {\n      var _getBookWithUserData = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(bookId, userId) {\n        var userBook, url, converted, book, formatted;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return this.fetchUserBookData(userId, bookId);\n\n              case 3:\n                userBook = _context2.sent;\n\n                if (!userBook) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", userBook);\n\n              case 8:\n                url = \"\".concat(this.root, \"book/show/\").concat(bookId, \".xml?key=\").concat(this.devKey);\n                _context2.next = 11;\n                return this.getValueFromGoodreads(url);\n\n              case 11:\n                converted = _context2.sent;\n                book = this.findValue(converted, \"book\");\n\n                if (book) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](404, \"Book not found\");\n\n              case 15:\n                formatted = this.formatBookService.formatBookForBookPage(book);\n                _context2.next = 18;\n                return this.getHQImage(formatted.imageUrl, formatted.isbn);\n\n              case 18:\n                formatted.imageUrl = _context2.sent;\n                return _context2.abrupt(\"return\", formatted);\n\n              case 20:\n                _context2.next = 27;\n                break;\n\n              case 22:\n                _context2.prev = 22;\n                _context2.t0 = _context2[\"catch\"](0);\n\n                if (!_context2.t0.userMessage) {\n                  _context2.next = 26;\n                  break;\n                }\n\n                throw _context2.t0;\n\n              case 26:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](500, \"Something went wrong while retrieving book\");\n\n              case 27:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 22]]);\n      }));\n\n      function getBookWithUserData(_x2, _x3) {\n        return _getBookWithUserData.apply(this, arguments);\n      }\n\n      return getBookWithUserData;\n    }()\n  }, {\n    key: \"fetchUserBookData\",\n    value: function () {\n      var _fetchUserBookData = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(userId, bookId) {\n        var snapshot;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return firebase__WEBPACK_IMPORTED_MODULE_2___default.a.firestore().collection(\"users\").doc(userId).collection(\"books\").where(\"id\", \"==\", bookId).get();\n\n              case 2:\n                snapshot = _context3.sent;\n\n                if (!snapshot.empty) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", false);\n\n              case 7:\n                return _context3.abrupt(\"return\", snapshot.docs[0].data());\n\n              case 8:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function fetchUserBookData(_x4, _x5) {\n        return _fetchUserBookData.apply(this, arguments);\n      }\n\n      return fetchUserBookData;\n    }()\n  }]);\n\n  return GoodreadsBookService;\n}(_goodreadsBaseService__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (GoodreadsBookService);\n\n//# sourceURL=webpack:///./api/services/goodreads/goodreadsBookService.js?");

/***/ }),

/***/ "./api/services/goodreads/goodreadsSeriesService.js":
/*!**********************************************************!*\
  !*** ./api/services/goodreads/goodreadsSeriesService.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _goodreadsBaseService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./goodreadsBaseService */ \"./api/services/goodreads/goodreadsBaseService.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\nvar GoodreadsSeriesService = /*#__PURE__*/function (_GoodreadsBaseService) {\n  _inherits(GoodreadsSeriesService, _GoodreadsBaseService);\n\n  var _super = _createSuper(GoodreadsSeriesService);\n\n  function GoodreadsSeriesService(formatSeriesService) {\n    var _this;\n\n    _classCallCheck(this, GoodreadsSeriesService);\n\n    _this = _super.call(this);\n    _this.formatSeriesService = formatSeriesService;\n    return _this;\n  }\n\n  _createClass(GoodreadsSeriesService, [{\n    key: \"getSeriesByGoodreadsId\",\n    value: function () {\n      var _getSeriesByGoodreadsId = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(id) {\n        var url, converted, series, author, result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                url = \"\".concat(this.root, \"series/\").concat(id, \"?key=\").concat(this.devKey);\n                _context.next = 4;\n                return this.getValueFromGoodreads(url);\n\n              case 4:\n                converted = _context.sent;\n                series = this.findValue(converted, \"series\");\n                author = this.findValue(series, \"author\");\n\n                if (series) {\n                  _context.next = 9;\n                  break;\n                }\n\n                throw new ErrorWithHttpCode(404, \"Data was not found\");\n\n              case 9:\n                result = this.formatSeriesService.formatSeriesForSeriesPage(series);\n                result.author = this.formatSeriesService.formatSeriesAuthor(author);\n                return _context.abrupt(\"return\", result);\n\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](0);\n\n                if (!_context.t0.userMessage) {\n                  _context.next = 18;\n                  break;\n                }\n\n                throw _context.t0;\n\n              case 18:\n                throw new ErrorWithHttpCode(_context.t0.httpCode || 500, _context.t0.message);\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 14]]);\n      }));\n\n      function getSeriesByGoodreadsId(_x) {\n        return _getSeriesByGoodreadsId.apply(this, arguments);\n      }\n\n      return getSeriesByGoodreadsId;\n    }()\n  }]);\n\n  return GoodreadsSeriesService;\n}(_goodreadsBaseService__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (GoodreadsSeriesService);\n\n//# sourceURL=webpack:///./api/services/goodreads/goodreadsSeriesService.js?");

/***/ }),

/***/ "./api/services/privateBookService.js":
/*!********************************************!*\
  !*** ./api/services/privateBookService.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase */ \"firebase\");\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/storage */ \"firebase/storage\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(firebase_storage__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _model_UserData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../model/UserData */ \"./api/model/UserData.js\");\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\nvar defaultImgUrl = \"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png\";\n\nvar PrivateBookService = /*#__PURE__*/function () {\n  function PrivateBookService() {\n    _classCallCheck(this, PrivateBookService);\n  }\n\n  _createClass(PrivateBookService, [{\n    key: \"getUserBooksAsFBCollection\",\n    value: function getUserBooksAsFBCollection(userId) {\n      return firebase__WEBPACK_IMPORTED_MODULE_0___default.a.firestore().collection(\"users\").doc(userId).collection(\"books\");\n    }\n  }, {\n    key: \"getPrivateBookById\",\n    value: function () {\n      var _getPrivateBookById = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(userId, bookFid) {\n        var bookSnapshot;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return this.getUserBooksAsFBCollection(userId).doc(bookFid).get();\n\n              case 3:\n                bookSnapshot = _context.sent;\n\n                if (!bookSnapshot.exists) {\n                  _context.next = 8;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", _objectSpread({\n                  id: bookSnapshot.id\n                }, bookSnapshot.data()));\n\n              case 8:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_3__[\"ErrorWithHttpCode\"](404, \"Book not found\");\n\n              case 9:\n                _context.next = 16;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](0);\n\n                if (!_context.t0.userMessage) {\n                  _context.next = 15;\n                  break;\n                }\n\n                throw _context.t0;\n\n              case 15:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_3__[\"ErrorWithHttpCode\"](500, \"Something went wrong while retrieving user book\");\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 11]]);\n      }));\n\n      function getPrivateBookById(_x, _x2) {\n        return _getPrivateBookById.apply(this, arguments);\n      }\n\n      return getPrivateBookById;\n    }()\n  }, {\n    key: \"getPrivateBooks\",\n    value: function () {\n      var _getPrivateBooks = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(userId) {\n        var snapshot;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return this.getUserBooksAsFBCollection(userId).where(\"private\", \"==\", true).get();\n\n              case 3:\n                snapshot = _context2.sent;\n\n                if (!snapshot.empty) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", []);\n\n              case 8:\n                return _context2.abrupt(\"return\", snapshot.docs.map(function (doc) {\n                  return _objectSpread({\n                    id: doc.id\n                  }, doc.data());\n                }));\n\n              case 9:\n                _context2.next = 16;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](0);\n\n                if (!_context2.t0.userMessage) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                throw _context2.t0;\n\n              case 15:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_3__[\"ErrorWithHttpCode\"](500, \"Something went wrong while retrieving user books\");\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 11]]);\n      }));\n\n      function getPrivateBooks(_x3) {\n        return _getPrivateBooks.apply(this, arguments);\n      }\n\n      return getPrivateBooks;\n    }()\n  }, {\n    key: \"saveUserBook\",\n    value: function () {\n      var _saveUserBook = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(userId, book, cover) {\n        var addedBookDoc, privateBook, snapshot, url, updatedBook;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n\n                if (!(!book.title || !book.author || Number.isNaN(+book.pages))) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_3__[\"ErrorWithHttpCode\"](400, \"Book information is invalid\");\n\n              case 3:\n                addedBookDoc = this.getUserBooksAsFBCollection(userId).doc();\n                privateBook = {\n                  id: addedBookDoc.id,\n                  title: book.title,\n                  authors: book.author,\n                  pages: +book.pages,\n                  imageUrl: \"\",\n                  description: book.description,\n                  userData: _objectSpread({}, new _model_UserData__WEBPACK_IMPORTED_MODULE_2__[\"UserData\"]()),\n                  // Firebase can't process custom objects like this!\n                  \"private\": true\n                };\n\n                if (cover) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                privateBook.imageUrl = defaultImgUrl;\n                _context3.next = 9;\n                return addedBookDoc.set(privateBook);\n\n              case 9:\n                _context3.next = 11;\n                return addedBookDoc.get();\n\n              case 11:\n                snapshot = _context3.sent;\n\n                if (!snapshot.exists) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", _objectSpread({\n                  id: snapshot.id\n                }, snapshot.data()));\n\n              case 16:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_3__[\"ErrorWithHttpCode\"](500, \"Someting wrong happened while saving private book\");\n\n              case 17:\n                _context3.next = 27;\n                break;\n\n              case 19:\n                _context3.next = 21;\n                return this.saveBookCover(userId, addedBookDoc.id, cover);\n\n              case 21:\n                url = _context3.sent;\n                _context3.next = 24;\n                return this.updateImageUrl(userId, addedBookDoc.id, url, privateBook);\n\n              case 24:\n                updatedBook = _context3.sent;\n                updatedBook.id = addedBookDoc.id;\n                return _context3.abrupt(\"return\", updatedBook);\n\n              case 27:\n                _context3.next = 35;\n                break;\n\n              case 29:\n                _context3.prev = 29;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.log(_context3.t0);\n\n                if (!_context3.t0.userMessage) {\n                  _context3.next = 34;\n                  break;\n                }\n\n                throw _context3.t0;\n\n              case 34:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_3__[\"ErrorWithHttpCode\"](500, \"Something went wrong while saving private book\");\n\n              case 35:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 29]]);\n      }));\n\n      function saveUserBook(_x4, _x5, _x6) {\n        return _saveUserBook.apply(this, arguments);\n      }\n\n      return saveUserBook;\n    }()\n  }, {\n    key: \"saveBookCover\",\n    value: function () {\n      var _saveBookCover = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(userId, bookKey, cover) {\n        var rootRef, fileExt, currentCoverRef, arrayBuffer, metadata;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                rootRef = firebase__WEBPACK_IMPORTED_MODULE_0___default.a.storage().ref();\n                fileExt = cover.originalname.slice(cover.originalname.indexOf(\".\"));\n                currentCoverRef = rootRef.child(userId).child(bookKey).child(\"cover\".concat(fileExt));\n                arrayBuffer = Uint8Array.from(cover.buffer).buffer;\n                metadata = {\n                  contentType: cover.mimetype\n                };\n                _context4.next = 7;\n                return currentCoverRef.put(arrayBuffer, metadata);\n\n              case 7:\n                return _context4.abrupt(\"return\", currentCoverRef.getDownloadURL());\n\n              case 8:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      function saveBookCover(_x7, _x8, _x9) {\n        return _saveBookCover.apply(this, arguments);\n      }\n\n      return saveBookCover;\n    }()\n  }, {\n    key: \"updateImageUrl\",\n    value: function () {\n      var _updateImageUrl = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(userId, bookKey, url, book) {\n        var updatedBook, bookDoc, snapshot;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                updatedBook = book;\n                updatedBook.imageUrl = url;\n                bookDoc = this.getUserBooksAsFBCollection(userId).doc(bookKey);\n                _context5.next = 5;\n                return bookDoc.set(updatedBook);\n\n              case 5:\n                _context5.next = 7;\n                return bookDoc.get();\n\n              case 7:\n                snapshot = _context5.sent;\n\n                if (!snapshot.exists) {\n                  _context5.next = 12;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", snapshot.data());\n\n              case 12:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_3__[\"ErrorWithHttpCode\"](500, \"Something went wrong while saving private book\");\n\n              case 13:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function updateImageUrl(_x10, _x11, _x12, _x13) {\n        return _updateImageUrl.apply(this, arguments);\n      }\n\n      return updateImageUrl;\n    }()\n  }, {\n    key: \"removePrivateBook\",\n    value: function () {\n      var _removePrivateBook = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(userId, bookId, url) {\n        var collection;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                collection = this.getUserBooksAsFBCollection(userId);\n                _context6.next = 4;\n                return collection.doc(bookId)[\"delete\"]();\n\n              case 4:\n                if (url.includes(\"nophoto\")) {\n                  _context6.next = 7;\n                  break;\n                }\n\n                _context6.next = 7;\n                return firebase__WEBPACK_IMPORTED_MODULE_0___default.a.storage().refFromURL(url)[\"delete\"]();\n\n              case 7:\n                return _context6.abrupt(\"return\", true);\n\n              case 10:\n                _context6.prev = 10;\n                _context6.t0 = _context6[\"catch\"](0);\n                console.log(_context6.t0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_3__[\"ErrorWithHttpCode\"](500, \"Something went wrong while removing private book\");\n\n              case 14:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[0, 10]]);\n      }));\n\n      function removePrivateBook(_x14, _x15, _x16) {\n        return _removePrivateBook.apply(this, arguments);\n      }\n\n      return removePrivateBook;\n    }()\n  }]);\n\n  return PrivateBookService;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (PrivateBookService);\n\n//# sourceURL=webpack:///./api/services/privateBookService.js?");

/***/ }),

/***/ "./api/services/tokenService.js":
/*!**************************************!*\
  !*** ./api/services/tokenService.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\nvar TokenService = /*#__PURE__*/function () {\n  function TokenService() {\n    _classCallCheck(this, TokenService);\n\n    this.createToken = this.createToken.bind(this);\n    this.validateToken = this.validateToken.bind(this);\n  }\n\n  _createClass(TokenService, [{\n    key: \"createToken\",\n    value: function createToken(user, expire) {\n      if (!user || expire <= 0) throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](400, \"Error creating a token\");\n      return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default.a.sign(user, process.env.JWT_KEY, {\n        expiresIn: expire\n      });\n    }\n  }, {\n    key: \"validateToken\",\n    value: function validateToken(token) {\n      if (!token) throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](401, \"Missing access token\");\n      return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default.a.verify(token, process.env.JWT_KEY, function (error, decoded) {\n        if (error) {\n          if (error.message === \"jwt expired\") {\n            throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](401, \"Token has expired\");\n          }\n\n          throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](401, \"Failed to authenticate token\");\n        }\n\n        return decoded;\n      });\n    }\n  }]);\n\n  return TokenService;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (TokenService);\n\n//# sourceURL=webpack:///./api/services/tokenService.js?");

/***/ }),

/***/ "./api/services/userBooksService.js":
/*!******************************************!*\
  !*** ./api/services/userBooksService.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase */ \"firebase\");\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\n/* harmony import */ var _model_UserData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../model/UserData */ \"./api/model/UserData.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar avaliableBookStatus = [\"finished\", \"stopped\", \"2read\", \"reading\", \"not reading\"];\n\nvar UserBooksService = /*#__PURE__*/function () {\n  function UserBooksService(feedService) {\n    _classCallCheck(this, UserBooksService);\n\n    this.feedService = feedService;\n  }\n\n  _createClass(UserBooksService, [{\n    key: \"getUserBooksAsFBCollection\",\n    value: function getUserBooksAsFBCollection(userId) {\n      return firebase__WEBPACK_IMPORTED_MODULE_0___default.a.firestore().collection(\"users\").doc(userId).collection(\"books\");\n    }\n  }, {\n    key: \"getUserBooksAsArray\",\n    value: function () {\n      var _getUserBooksAsArray = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(userId) {\n        var snapshot;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                console.log(firebase__WEBPACK_IMPORTED_MODULE_0___default.a.auth().currentUser.email);\n                _context.next = 4;\n                return this.getUserBooksAsFBCollection(userId).get();\n\n              case 4:\n                snapshot = _context.sent;\n\n                if (!snapshot.empty) {\n                  _context.next = 9;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", []);\n\n              case 9:\n                return _context.abrupt(\"return\", snapshot.docs.map(function (doc) {\n                  return doc.data();\n                }));\n\n              case 10:\n                _context.next = 18;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0);\n\n                if (!_context.t0.userMessage) {\n                  _context.next = 17;\n                  break;\n                }\n\n                throw _context.t0;\n\n              case 17:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](500, \"Could not retrieve user books\");\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 12]]);\n      }));\n\n      function getUserBooksAsArray(_x) {\n        return _getUserBooksAsArray.apply(this, arguments);\n      }\n\n      return getUserBooksAsArray;\n    }()\n  }, {\n    key: \"getUserCollection\",\n    value: function () {\n      var _getUserCollection = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(userId, collection) {\n        var userBooksCollection, snapshot;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n\n                if (avaliableBookStatus.includes(collection.toLowerCase())) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Book status is invalid\");\n\n              case 3:\n                userBooksCollection = this.getUserBooksAsFBCollection(userId);\n                _context2.next = 6;\n                return userBooksCollection.where(\"userData.status\", \"==\", collection).get();\n\n              case 6:\n                snapshot = _context2.sent;\n\n                if (!snapshot.empty) {\n                  _context2.next = 11;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", []);\n\n              case 11:\n                return _context2.abrupt(\"return\", snapshot.docs.map(function (doc) {\n                  return doc.data();\n                }));\n\n              case 12:\n                _context2.next = 20;\n                break;\n\n              case 14:\n                _context2.prev = 14;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n\n                if (!_context2.t0.userMessage) {\n                  _context2.next = 19;\n                  break;\n                }\n\n                throw _context2.t0;\n\n              case 19:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](500, \"Ooops! Something went wrong while retrieving user books\");\n\n              case 20:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 14]]);\n      }));\n\n      function getUserCollection(_x2, _x3) {\n        return _getUserCollection.apply(this, arguments);\n      }\n\n      return getUserCollection;\n    }()\n  }, {\n    key: \"addToUserCollection\",\n    value: function () {\n      var _addToUserCollection = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(userId, collection, book) {\n        var userBooksCollection, snapshot, doc, existingBookId;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n\n                if (avaliableBookStatus.includes(collection.toLowerCase())) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Book status is invalid\");\n\n              case 3:\n                console.log(book); // Determine if book IS in collection.\n\n                userBooksCollection = this.getUserBooksAsFBCollection(userId);\n                _context3.next = 7;\n                return userBooksCollection.where(\"id\", \"==\", book.id).get();\n\n              case 7:\n                snapshot = _context3.sent;\n                book.userData.status = collection;\n\n                if (!snapshot.empty) {\n                  _context3.next = 14;\n                  break;\n                }\n\n                _context3.next = 12;\n                return userBooksCollection.doc().set(book);\n\n              case 12:\n                _context3.next = 18;\n                break;\n\n              case 14:\n                // Otherwise - only update\n                doc = snapshot.docs[0];\n                existingBookId = doc.id;\n                _context3.next = 18;\n                return userBooksCollection.doc(existingBookId).update({\n                  userData: book.userData\n                });\n\n              case 18:\n                _context3.next = 20;\n                return this.feedService.saveFeed(book, collection, userId);\n\n              case 20:\n                return _context3.abrupt(\"return\", book);\n\n              case 23:\n                _context3.prev = 23;\n                _context3.t0 = _context3[\"catch\"](0);\n\n                if (!_context3.t0.userMessage) {\n                  _context3.next = 27;\n                  break;\n                }\n\n                throw _context3.t0;\n\n              case 27:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](500, \"Something went wrong while updating user books!\");\n\n              case 28:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 23]]);\n      }));\n\n      function addToUserCollection(_x4, _x5, _x6) {\n        return _addToUserCollection.apply(this, arguments);\n      }\n\n      return addToUserCollection;\n    }()\n  }, {\n    key: \"deleteBookFromCollection\",\n    value: function () {\n      var _deleteBookFromCollection = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(userId, bookId) {\n        var snapshot, doc, id, deleted;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return this.getUserBooksAsFBCollection(userId).where(\"id\", \"==\", bookId).get();\n\n              case 3:\n                snapshot = _context4.sent;\n\n                if (snapshot.empty) {\n                  _context4.next = 13;\n                  break;\n                }\n\n                doc = snapshot.docs[0];\n                id = doc.id;\n                this.getUserBooksAsFBCollection(userId).doc(id)[\"delete\"]();\n                deleted = doc.data();\n                deleted.userData = new _model_UserData__WEBPACK_IMPORTED_MODULE_2__[\"UserData\"]();\n                _context4.next = 12;\n                return this.feedService.saveFeed(deleted, \"not\", userId);\n\n              case 12:\n                return _context4.abrupt(\"return\", deleted);\n\n              case 13:\n                return _context4.abrupt(\"return\", false);\n\n              case 16:\n                _context4.prev = 16;\n                _context4.t0 = _context4[\"catch\"](0);\n\n                if (!_context4.t0.userMessage) {\n                  _context4.next = 20;\n                  break;\n                }\n\n                throw _context4.t0;\n\n              case 20:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](500, \"Something went wrong while deleting book!\");\n\n              case 21:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 16]]);\n      }));\n\n      function deleteBookFromCollection(_x7, _x8) {\n        return _deleteBookFromCollection.apply(this, arguments);\n      }\n\n      return deleteBookFromCollection;\n    }()\n  }, {\n    key: \"setFavorite\",\n    value: function () {\n      var _setFavorite = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(userId, book) {\n        var userBooksCollection, snapshot, doc, id;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                userBooksCollection = this.getUserBooksAsFBCollection(userId);\n                _context5.next = 4;\n                return userBooksCollection.where(\"id\", \"==\", book.id).get();\n\n              case 4:\n                snapshot = _context5.sent;\n                book.userData.isFavorited = !book.userData.isFavorited;\n\n                if (!snapshot.empty) {\n                  _context5.next = 11;\n                  break;\n                }\n\n                _context5.next = 9;\n                return userBooksCollection.doc().set(book);\n\n              case 9:\n                _context5.next = 15;\n                break;\n\n              case 11:\n                doc = snapshot.docs[0];\n                id = doc.id;\n                _context5.next = 15;\n                return userBooksCollection.doc(id).update({\n                  \"userData.isFavorited\": book.userData.isFavorited\n                });\n\n              case 15:\n                return _context5.abrupt(\"return\", book);\n\n              case 18:\n                _context5.prev = 18;\n                _context5.t0 = _context5[\"catch\"](0);\n\n                if (!_context5.t0.userMessage) {\n                  _context5.next = 22;\n                  break;\n                }\n\n                throw _context5.t0;\n\n              case 22:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](500, \"Something went wrong while updating book!\");\n\n              case 23:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[0, 18]]);\n      }));\n\n      function setFavorite(_x9, _x10) {\n        return _setFavorite.apply(this, arguments);\n      }\n\n      return setFavorite;\n    }()\n  }, {\n    key: \"getFavorites\",\n    value: function () {\n      var _getFavorites = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(userId) {\n        var snapshot;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                _context6.next = 3;\n                return this.getUserBooksAsFBCollection(userId).where(\"userData.isFavorited\", \"==\", true).get();\n\n              case 3:\n                snapshot = _context6.sent;\n\n                if (!snapshot.empty) {\n                  _context6.next = 6;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", []);\n\n              case 6:\n                return _context6.abrupt(\"return\", snapshot.docs.map(function (doc) {\n                  return doc.data();\n                }));\n\n              case 9:\n                _context6.prev = 9;\n                _context6.t0 = _context6[\"catch\"](0);\n\n                if (!_context6.t0.userMessage) {\n                  _context6.next = 13;\n                  break;\n                }\n\n                throw _context6.t0;\n\n              case 13:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](500, \"Something went wrong while retrieving user books!\");\n\n              case 14:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[0, 9]]);\n      }));\n\n      function getFavorites(_x11) {\n        return _getFavorites.apply(this, arguments);\n      }\n\n      return getFavorites;\n    }() //TODO: Add User Feed\n\n  }, {\n    key: \"updateBook\",\n    value: function () {\n      var _updateBook = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(userId, book) {\n        var userBooksCollection, snapshot, doc, id, oldBook, pageDiff;\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                userBooksCollection = this.getUserBooksAsFBCollection(userId);\n                _context7.next = 4;\n                return userBooksCollection.where(\"id\", \"==\", book.id).get();\n\n              case 4:\n                snapshot = _context7.sent;\n\n                if (!snapshot.empty) {\n                  _context7.next = 9;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](404, \"Book not found\");\n\n              case 9:\n                doc = snapshot.docs[0];\n                id = doc.id;\n                oldBook = doc.data();\n                pageDiff = book.userData.pagesRead - oldBook.userData.pagesRead;\n                console.log(pageDiff);\n                _context7.next = 16;\n                return this.feedService.saveFeed(book, \"update\", userId, {\n                  pages: pageDiff\n                });\n\n              case 16:\n                if (!(Math.abs(book.userData.rating - oldBook.userData.rating) > 0)) {\n                  _context7.next = 19;\n                  break;\n                }\n\n                _context7.next = 19;\n                return this.feedService.saveFeed(book, \"rating\", userId, {\n                  rating: book.userData.rating\n                });\n\n              case 19:\n                _context7.next = 21;\n                return userBooksCollection.doc(id).update({\n                  userData: book.userData\n                });\n\n              case 21:\n                return _context7.abrupt(\"return\", book);\n\n              case 24:\n                _context7.prev = 24;\n                _context7.t0 = _context7[\"catch\"](0);\n\n                if (!_context7.t0.userMessage) {\n                  _context7.next = 28;\n                  break;\n                }\n\n                throw _context7.t0;\n\n              case 28:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](500, \"Ooops! Something went wrong while updating book\");\n\n              case 29:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 24]]);\n      }));\n\n      function updateBook(_x12, _x13) {\n        return _updateBook.apply(this, arguments);\n      }\n\n      return updateBook;\n    }()\n  }, {\n    key: \"getUserGenres\",\n    value: function () {\n      var _getUserGenres = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(userId) {\n        var books, genreMap;\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                _context8.next = 3;\n                return this.getUserBooksAsArray(userId);\n\n              case 3:\n                books = _context8.sent;\n                genreMap = {};\n                books.forEach(function (book) {\n                  if (!book.genres) return;\n                  book.genres.slice(0, 2).forEach(function (genre) {\n                    if (!genreMap.hasOwnProperty(genre)) {\n                      genreMap[genre] = 1;\n                    } else {\n                      genreMap[genre] += 1;\n                    }\n                  });\n                });\n                return _context8.abrupt(\"return\", genreMap);\n\n              case 9:\n                _context8.prev = 9;\n                _context8.t0 = _context8[\"catch\"](0);\n                console.log(_context8.t0);\n\n                if (!_context8.t0.userMessage) {\n                  _context8.next = 14;\n                  break;\n                }\n\n                throw _context8.t0;\n\n              case 14:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](500, \"Ooops! Something went wrong while retrieving user genres\");\n\n              case 15:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[0, 9]]);\n      }));\n\n      function getUserGenres(_x14) {\n        return _getUserGenres.apply(this, arguments);\n      }\n\n      return getUserGenres;\n    }()\n  }]);\n\n  return UserBooksService;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (UserBooksService);\n\n//# sourceURL=webpack:///./api/services/userBooksService.js?");

/***/ }),

/***/ "./api/services/userService.js":
/*!*************************************!*\
  !*** ./api/services/userService.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase */ \"firebase\");\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar UserService = /*#__PURE__*/function () {\n  function UserService() {\n    _classCallCheck(this, UserService);\n  }\n\n  _createClass(UserService, [{\n    key: \"getUserById\",\n    value: function () {\n      var _getUserById = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(userId) {\n        var userRef, userDoc, user;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                userRef = firebase__WEBPACK_IMPORTED_MODULE_0___default.a.firestore().collection(\"users\").doc(userId);\n                _context.next = 4;\n                return userRef.get();\n\n              case 4:\n                userDoc = _context.sent;\n\n                if (userDoc.exists) {\n                  _context.next = 9;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](404, \"User not found\");\n\n              case 9:\n                user = userDoc.data();\n                return _context.abrupt(\"return\", _objectSpread(_objectSpread({}, user), {}, {\n                  id: userId\n                }));\n\n              case 11:\n                _context.next = 20;\n                break;\n\n              case 13:\n                _context.prev = 13;\n                _context.t0 = _context[\"catch\"](0);\n\n                if (!_context.t0.userMessage) {\n                  _context.next = 19;\n                  break;\n                }\n\n                throw _context.t0;\n\n              case 19:\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](500, \"Could not retrieve user\");\n\n              case 20:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 13]]);\n      }));\n\n      function getUserById(_x) {\n        return _getUserById.apply(this, arguments);\n      }\n\n      return getUserById;\n    }()\n  }]);\n\n  return UserService;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (UserService);\n\n//# sourceURL=webpack:///./api/services/userService.js?");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"axios\");\n\n//# sourceURL=webpack:///external_%22axios%22?");

/***/ }),

/***/ "body-parser":
/*!******************************!*\
  !*** external "body-parser" ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"body-parser\");\n\n//# sourceURL=webpack:///external_%22body-parser%22?");

/***/ }),

/***/ "core-js/stable":
/*!*********************************!*\
  !*** external "core-js/stable" ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"core-js/stable\");\n\n//# sourceURL=webpack:///external_%22core-js/stable%22?");

/***/ }),

/***/ "cors":
/*!***********************!*\
  !*** external "cors" ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"cors\");\n\n//# sourceURL=webpack:///external_%22cors%22?");

/***/ }),

/***/ "dotenv/config":
/*!********************************!*\
  !*** external "dotenv/config" ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"dotenv/config\");\n\n//# sourceURL=webpack:///external_%22dotenv/config%22?");

/***/ }),

/***/ "express":
/*!**************************!*\
  !*** external "express" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"express\");\n\n//# sourceURL=webpack:///external_%22express%22?");

/***/ }),

/***/ "firebase":
/*!***************************!*\
  !*** external "firebase" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"firebase\");\n\n//# sourceURL=webpack:///external_%22firebase%22?");

/***/ }),

/***/ "firebase/app":
/*!*******************************!*\
  !*** external "firebase/app" ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"firebase/app\");\n\n//# sourceURL=webpack:///external_%22firebase/app%22?");

/***/ }),

/***/ "firebase/storage":
/*!***********************************!*\
  !*** external "firebase/storage" ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"firebase/storage\");\n\n//# sourceURL=webpack:///external_%22firebase/storage%22?");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"jsonwebtoken\");\n\n//# sourceURL=webpack:///external_%22jsonwebtoken%22?");

/***/ }),

/***/ "moment":
/*!*************************!*\
  !*** external "moment" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"moment\");\n\n//# sourceURL=webpack:///external_%22moment%22?");

/***/ }),

/***/ "multer":
/*!*************************!*\
  !*** external "multer" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"multer\");\n\n//# sourceURL=webpack:///external_%22multer%22?");

/***/ }),

/***/ "oauth":
/*!************************!*\
  !*** external "oauth" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"oauth\");\n\n//# sourceURL=webpack:///external_%22oauth%22?");

/***/ }),

/***/ "regenerator-runtime/runtime":
/*!**********************************************!*\
  !*** external "regenerator-runtime/runtime" ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"regenerator-runtime/runtime\");\n\n//# sourceURL=webpack:///external_%22regenerator-runtime/runtime%22?");

/***/ }),

/***/ "xhr2":
/*!***********************!*\
  !*** external "xhr2" ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"xhr2\");\n\n//# sourceURL=webpack:///external_%22xhr2%22?");

/***/ }),

/***/ "xml-js":
/*!*************************!*\
  !*** external "xml-js" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"xml-js\");\n\n//# sourceURL=webpack:///external_%22xml-js%22?");

/***/ })

/******/ });