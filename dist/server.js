/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./api/server.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./api/controllers/authController.js":
/*!*******************************************!*\
  !*** ./api/controllers/authController.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _services_authService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/authService */ \"./api/services/authService.js\");\n/* harmony import */ var _services_tokenService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/tokenService */ \"./api/services/tokenService.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar tokenService = new _services_tokenService__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\nvar authService = new _services_authService__WEBPACK_IMPORTED_MODULE_0__[\"default\"](tokenService);\n\nvar AuthController = /*#__PURE__*/function () {\n  function AuthController(authService) {\n    _classCallCheck(this, AuthController);\n\n    this.authService = authService;\n    this.signInUser = this.signInUser.bind(this);\n    this.signUpUser = this.signUpUser.bind(this);\n  }\n\n  _createClass(AuthController, [{\n    key: \"signInUser\",\n    value: function () {\n      var _signInUser = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(request, response) {\n        var userCredentials, user;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(\"SignIn request accepted\");\n                userCredentials = request.body;\n                _context.prev = 2;\n                _context.next = 5;\n                return this.authService.getUser(userCredentials.email, userCredentials.password);\n\n              case 5:\n                user = _context.sent;\n                response.json(user);\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](2);\n                response.status(_context.t0.httpCode).json({\n                  httpCode: _context.t0.httpCode,\n                  message: _context.t0.message\n                });\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 9]]);\n      }));\n\n      function signInUser(_x, _x2) {\n        return _signInUser.apply(this, arguments);\n      }\n\n      return signInUser;\n    }()\n  }, {\n    key: \"signUpUser\",\n    value: function () {\n      var _signUpUser = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(request, response) {\n        var userCredentials, user;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                console.log(\"SignUp request accepted\");\n                userCredentials = request.body;\n                _context2.prev = 2;\n                _context2.next = 5;\n                return this.authService.createUser(userCredentials.email, userCredentials.password);\n\n              case 5:\n                user = _context2.sent;\n                response.json(user);\n                _context2.next = 12;\n                break;\n\n              case 9:\n                _context2.prev = 9;\n                _context2.t0 = _context2[\"catch\"](2);\n                response.status(_context2.t0.httpCode).json({\n                  httpCode: _context2.t0.httpCode,\n                  message: _context2.t0.message\n                });\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[2, 9]]);\n      }));\n\n      function signUpUser(_x3, _x4) {\n        return _signUpUser.apply(this, arguments);\n      }\n\n      return signUpUser;\n    }()\n  }]);\n\n  return AuthController;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new AuthController(authService));\n\n//# sourceURL=webpack:///./api/controllers/authController.js?");

/***/ }),

/***/ "./api/controllers/authorController.js":
/*!*********************************************!*\
  !*** ./api/controllers/authorController.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _services_goodreads_goodreadsAuthorService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/goodreads/goodreadsAuthorService */ \"./api/services/goodreads/goodreadsAuthorService.js\");\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\n/* harmony import */ var _services_tokenService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/tokenService */ \"./api/services/tokenService.js\");\n/* harmony import */ var _services_formatting_formatAuthorService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/formatting/formatAuthorService */ \"./api/services/formatting/formatAuthorService.js\");\n/* harmony import */ var _services_formatting_formatSeriesService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../services/formatting/formatSeriesService */ \"./api/services/formatting/formatSeriesService.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\nvar tokenService = new _services_tokenService__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\nvar formatAuthorService = new _services_formatting_formatAuthorService__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\nvar formatSeriesService = new _services_formatting_formatSeriesService__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\nvar goodreadsAuthorService = new _services_goodreads_goodreadsAuthorService__WEBPACK_IMPORTED_MODULE_0__[\"default\"](formatAuthorService, formatSeriesService);\n\nvar AuthorController = /*#__PURE__*/function () {\n  function AuthorController(goodreadsAuthorService, tokenService) {\n    _classCallCheck(this, AuthorController);\n\n    this.goodreadsAuthorService = goodreadsAuthorService;\n    this.tokenService = tokenService;\n    this.getAuthorInfo = this.getAuthorInfo.bind(this);\n    this.getAuthorSeries = this.getAuthorSeries.bind(this);\n  }\n\n  _createClass(AuthorController, [{\n    key: \"getAuthorInfo\",\n    value: function () {\n      var _getAuthorInfo = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(request, response) {\n        var authorId, token, validated, result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(\"Get Author request accepted!\");\n                authorId = request.params.id;\n                token = request.headers['x-access-token'];\n                console.log(authorId, token);\n                _context.prev = 4;\n\n                if (authorId) {\n                  _context.next = 7;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Request param is not valid\");\n\n              case 7:\n                validated = this.tokenService.validateToken(token);\n\n                if (validated) {\n                  _context.next = 10;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Error validating token\");\n\n              case 10:\n                _context.next = 12;\n                return this.goodreadsAuthorService.getAuthorByGoodreadsId(authorId);\n\n              case 12:\n                result = _context.sent;\n                response.json(result);\n                _context.next = 19;\n                break;\n\n              case 16:\n                _context.prev = 16;\n                _context.t0 = _context[\"catch\"](4);\n                response.status(_context.t0.httpCode).json({\n                  httpCode: _context.t0.httpCode,\n                  message: _context.t0.message\n                });\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[4, 16]]);\n      }));\n\n      function getAuthorInfo(_x, _x2) {\n        return _getAuthorInfo.apply(this, arguments);\n      }\n\n      return getAuthorInfo;\n    }()\n  }, {\n    key: \"getAuthorSeries\",\n    value: function () {\n      var _getAuthorSeries = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(request, response) {\n        var authorId, token, validated, result;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                console.log(\"Get Author's Series request accepted\");\n                authorId = request.params.id;\n                token = request.headers['x-access-token'];\n                console.log(authorId, token);\n                _context2.prev = 4;\n\n                if (authorId) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Request param is not valid\");\n\n              case 7:\n                validated = this.tokenService.validateToken(token);\n\n                if (validated) {\n                  _context2.next = 10;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Error validating token\");\n\n              case 10:\n                _context2.next = 12;\n                return this.goodreadsAuthorService.getAuthorSeries(authorId);\n\n              case 12:\n                result = _context2.sent;\n                response.json(result);\n                _context2.next = 19;\n                break;\n\n              case 16:\n                _context2.prev = 16;\n                _context2.t0 = _context2[\"catch\"](4);\n                response.status(_context2.t0.httpCode).json({\n                  httpCode: _context2.t0.httpCode,\n                  message: _context2.t0.message\n                });\n\n              case 19:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[4, 16]]);\n      }));\n\n      function getAuthorSeries(_x3, _x4) {\n        return _getAuthorSeries.apply(this, arguments);\n      }\n\n      return getAuthorSeries;\n    }()\n  }]);\n\n  return AuthorController;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new AuthorController(goodreadsAuthorService, tokenService));\n\n//# sourceURL=webpack:///./api/controllers/authorController.js?");

/***/ }),

/***/ "./api/controllers/bookController.js":
/*!*******************************************!*\
  !*** ./api/controllers/bookController.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _services_goodreads_goodreadsBookService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/goodreads/goodreadsBookService */ \"./api/services/goodreads/goodreadsBookService.js\");\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\n/* harmony import */ var _services_userService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/userService */ \"./api/services/userService.js\");\n/* harmony import */ var _services_tokenService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/tokenService */ \"./api/services/tokenService.js\");\n/* harmony import */ var _services_formatting_formatBookService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../services/formatting/formatBookService */ \"./api/services/formatting/formatBookService.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\nvar tokenService = new _services_tokenService__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\nvar formatBookService = new _services_formatting_formatBookService__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\nvar userService = new _services_userService__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\nvar goodreadsBookService = new _services_goodreads_goodreadsBookService__WEBPACK_IMPORTED_MODULE_0__[\"default\"](userService, formatBookService);\n\nvar BookController = /*#__PURE__*/function () {\n  function BookController(goodreadsBookService, tokenService) {\n    _classCallCheck(this, BookController);\n\n    this.goodreadsBookService = goodreadsBookService;\n    this.tokenService = tokenService;\n    this.searchByTitleOrAuthor = this.searchByTitleOrAuthor.bind(this);\n    this.getBookById = this.getBookById.bind(this);\n  }\n\n  _createClass(BookController, [{\n    key: \"searchByTitleOrAuthor\",\n    value: function () {\n      var _searchByTitleOrAuthor = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(request, response) {\n        var searchQuery, token, validated, result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(\"Search request accepted!\");\n                searchQuery = request.query.query;\n                token = request.headers['x-access-token'];\n                console.log(searchQuery, token);\n                _context.prev = 4;\n\n                if (searchQuery) {\n                  _context.next = 7;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Search query is empty\");\n\n              case 7:\n                validated = this.tokenService.validateToken(token);\n\n                if (validated) {\n                  _context.next = 10;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Error validating token\");\n\n              case 10:\n                _context.next = 12;\n                return this.goodreadsBookService.searchBooks(searchQuery);\n\n              case 12:\n                result = _context.sent;\n                response.json(result);\n                _context.next = 19;\n                break;\n\n              case 16:\n                _context.prev = 16;\n                _context.t0 = _context[\"catch\"](4);\n                response.status(_context.t0.httpCode).json({\n                  httpCode: _context.t0.httpCode,\n                  message: _context.t0.message\n                });\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[4, 16]]);\n      }));\n\n      function searchByTitleOrAuthor(_x, _x2) {\n        return _searchByTitleOrAuthor.apply(this, arguments);\n      }\n\n      return searchByTitleOrAuthor;\n    }()\n  }, {\n    key: \"getBookById\",\n    value: function () {\n      var _getBookById = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(request, response) {\n        var bookId, token, validated, result;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                console.log(\"Get Book By Id request accepted\");\n                bookId = request.params.bookId;\n                token = request.headers['x-access-token'];\n                console.log(bookId, token);\n                _context2.prev = 4;\n\n                if (bookId) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Id is empty\");\n\n              case 7:\n                validated = this.tokenService.validateToken(token);\n\n                if (validated) {\n                  _context2.next = 10;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Error validating token\");\n\n              case 10:\n                _context2.next = 12;\n                return this.goodreadsBookService.getBookWithUserData(bookId, validated.id);\n\n              case 12:\n                result = _context2.sent;\n                response.json(result);\n                _context2.next = 19;\n                break;\n\n              case 16:\n                _context2.prev = 16;\n                _context2.t0 = _context2[\"catch\"](4);\n                response.status(_context2.t0.httpCode).json({\n                  httpCode: _context2.t0.httpCode,\n                  message: _context2.t0.message\n                });\n\n              case 19:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[4, 16]]);\n      }));\n\n      function getBookById(_x3, _x4) {\n        return _getBookById.apply(this, arguments);\n      }\n\n      return getBookById;\n    }()\n  }]);\n\n  return BookController;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new BookController(goodreadsBookService, tokenService));\n\n//# sourceURL=webpack:///./api/controllers/bookController.js?");

/***/ }),

/***/ "./api/controllers/seriesController.js":
/*!*********************************************!*\
  !*** ./api/controllers/seriesController.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\n/* harmony import */ var _services_tokenService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/tokenService */ \"./api/services/tokenService.js\");\n/* harmony import */ var _services_goodreads_goodreadsSeriesService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/goodreads/goodreadsSeriesService */ \"./api/services/goodreads/goodreadsSeriesService.js\");\n/* harmony import */ var _services_formatting_formatSeriesService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../services/formatting/formatSeriesService */ \"./api/services/formatting/formatSeriesService.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\nvar tokenService = new _services_tokenService__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\nvar formatSeriesService = new _services_formatting_formatSeriesService__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\nvar goodreadsSeriesService = new _services_goodreads_goodreadsSeriesService__WEBPACK_IMPORTED_MODULE_2__[\"default\"](formatSeriesService);\n\nvar SeriesController = /*#__PURE__*/function () {\n  function SeriesController(goodreadsSeriesService, tokenService) {\n    _classCallCheck(this, SeriesController);\n\n    this.goodreadsSeriesService = goodreadsSeriesService;\n    this.tokenService = tokenService;\n    this.getSeriesById = this.getSeriesById.bind(this);\n  }\n\n  _createClass(SeriesController, [{\n    key: \"getSeriesById\",\n    value: function () {\n      var _getSeriesById = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(request, response) {\n        var seriesId, token, validated, result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(\"Get Series By Id request accepted!\");\n                seriesId = request.params.id;\n                token = request.headers['x-access-token'];\n                console.log(seriesId, token);\n                _context.prev = 4;\n\n                if (seriesId) {\n                  _context.next = 7;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_0__[\"ErrorWithHttpCode\"](400, \"Series id is empty\");\n\n              case 7:\n                validated = this.tokenService.validateToken(token);\n\n                if (validated) {\n                  _context.next = 10;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_0__[\"ErrorWithHttpCode\"](400, \"Error validating token\");\n\n              case 10:\n                _context.next = 12;\n                return this.goodreadsSeriesService.getSeriesByGoodreadsId(seriesId);\n\n              case 12:\n                result = _context.sent;\n                response.json(result);\n                _context.next = 19;\n                break;\n\n              case 16:\n                _context.prev = 16;\n                _context.t0 = _context[\"catch\"](4);\n                response.status(_context.t0.httpCode).json({\n                  httpCode: _context.t0.httpCode,\n                  message: _context.t0.message\n                });\n\n              case 19:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[4, 16]]);\n      }));\n\n      function getSeriesById(_x, _x2) {\n        return _getSeriesById.apply(this, arguments);\n      }\n\n      return getSeriesById;\n    }()\n  }]);\n\n  return SeriesController;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new SeriesController(goodreadsSeriesService, tokenService));\n\n//# sourceURL=webpack:///./api/controllers/seriesController.js?");

/***/ }),

/***/ "./api/controllers/userController.js":
/*!*******************************************!*\
  !*** ./api/controllers/userController.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _services_userService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../services/userService */ \"./api/services/userService.js\");\n/* harmony import */ var _services_userBooksService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../services/userBooksService */ \"./api/services/userBooksService.js\");\n/* harmony import */ var _services_tokenService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../services/tokenService */ \"./api/services/tokenService.js\");\n\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar userService = new _services_userService__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\nvar userBooksService = new _services_userBooksService__WEBPACK_IMPORTED_MODULE_1__[\"default\"](userService);\nvar tokenService = new _services_tokenService__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n\nvar UserController = /*#__PURE__*/function () {\n  function UserController(userService, userBooksService, tokenService) {\n    _classCallCheck(this, UserController);\n\n    this.userService = userService;\n    this.userBooksService = userBooksService;\n    this.tokenService = tokenService;\n    this.getUser = this.getUser.bind(this);\n    this.getUserBooks = this.getUserBooks.bind(this);\n    this.getCollection = this.getCollection.bind(this);\n    this.addToCollection = this.addToCollection.bind(this);\n    this.deleteBook = this.deleteBook.bind(this);\n    this.setFavorite = this.setFavorite.bind(this);\n    this.getFavoriteBooks = this.getFavoriteBooks.bind(this);\n    this.updateBook = this.updateBook.bind(this);\n    this.getUserGenres = this.getUserGenres.bind(this);\n  }\n\n  _createClass(UserController, [{\n    key: \"getUser\",\n    value: function () {\n      var _getUser = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(request, response) {\n        var token, validated, user;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(\"Get User request accepted\");\n                token = request.headers['x-access-token'];\n                console.log(token);\n                _context.prev = 3;\n                validated = this.tokenService.validateToken(token);\n\n                if (validated) {\n                  _context.next = 7;\n                  break;\n                }\n\n                throw new ErrorWithHttpCode(400, \"Error validating token\");\n\n              case 7:\n                _context.next = 9;\n                return this.userService.getUserById(validated.id);\n\n              case 9:\n                user = _context.sent;\n                response.json(user);\n                _context.next = 16;\n                break;\n\n              case 13:\n                _context.prev = 13;\n                _context.t0 = _context[\"catch\"](3);\n                response.status(_context.t0.httpCode).json(_context.t0);\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[3, 13]]);\n      }));\n\n      function getUser(_x, _x2) {\n        return _getUser.apply(this, arguments);\n      }\n\n      return getUser;\n    }()\n  }, {\n    key: \"getUserBooks\",\n    value: function () {\n      var _getUserBooks = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(request, response) {\n        var token, validated, result;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                console.log(\"Get User Books request accepted\");\n                token = request.headers['x-access-token'];\n                console.log(token);\n                _context2.prev = 3;\n                validated = this.tokenService.validateToken(token);\n\n                if (validated) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                throw new ErrorWithHttpCode(400, \"Error validating token\");\n\n              case 7:\n                _context2.next = 9;\n                return this.userBooksService.getUserBooks(validated.id);\n\n              case 9:\n                result = _context2.sent;\n                response.json(result);\n                _context2.next = 16;\n                break;\n\n              case 13:\n                _context2.prev = 13;\n                _context2.t0 = _context2[\"catch\"](3);\n                response.status(_context2.t0.httpCode).json(_context2.t0);\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[3, 13]]);\n      }));\n\n      function getUserBooks(_x3, _x4) {\n        return _getUserBooks.apply(this, arguments);\n      }\n\n      return getUserBooks;\n    }()\n  }, {\n    key: \"validateUser\",\n    value: function () {\n      var _validateUser = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(request, response) {\n        var token;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                console.log(\"Validate user request accepted\");\n                token = request.heders['x-access-token'];\n                console.log(token);\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function validateUser(_x5, _x6) {\n        return _validateUser.apply(this, arguments);\n      }\n\n      return validateUser;\n    }()\n  }, {\n    key: \"getCollection\",\n    value: function () {\n      var _getCollection = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(request, response) {\n        var collection, token, validated, result;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                collection = request.params.collection;\n                console.log(\"Get Books from \".concat(collection, \" request accepted\"));\n                token = request.headers['x-access-token'];\n                console.log(collection, token);\n                _context4.prev = 4;\n                validated = this.tokenService.validateToken(token);\n\n                if (validated) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                throw new ErrorWithHttpCode(400, \"Error validating token\");\n\n              case 8:\n                _context4.next = 10;\n                return this.userBooksService.getUserCollection(validated.id, collection);\n\n              case 10:\n                result = _context4.sent;\n                response.json(result);\n                _context4.next = 17;\n                break;\n\n              case 14:\n                _context4.prev = 14;\n                _context4.t0 = _context4[\"catch\"](4);\n                response.status(_context4.t0.httpCode).json(_context4.t0);\n\n              case 17:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[4, 14]]);\n      }));\n\n      function getCollection(_x7, _x8) {\n        return _getCollection.apply(this, arguments);\n      }\n\n      return getCollection;\n    }()\n  }, {\n    key: \"addToCollection\",\n    value: function () {\n      var _addToCollection = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(request, response) {\n        var collection, token, book, validated, result;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                collection = request.params.collection;\n                console.log(\"Get Books from \".concat(collection, \" request accepted\"));\n                token = request.headers['x-access-token'];\n                book = request.body.book;\n                console.log(collection, book, token);\n                _context5.prev = 5;\n                validated = this.tokenService.validateToken(token);\n\n                if (validated) {\n                  _context5.next = 9;\n                  break;\n                }\n\n                throw new ErrorWithHttpCode(400, \"Error validating token\");\n\n              case 9:\n                _context5.next = 11;\n                return this.userBooksService.addToUserCollection(validated.id, collection, book);\n\n              case 11:\n                result = _context5.sent;\n                response.json(result);\n                _context5.next = 19;\n                break;\n\n              case 15:\n                _context5.prev = 15;\n                _context5.t0 = _context5[\"catch\"](5);\n                console.log(\"error \", _context5.t0);\n                response.status(_context5.t0.httpCode).json(_context5.t0);\n\n              case 19:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[5, 15]]);\n      }));\n\n      function addToCollection(_x9, _x10) {\n        return _addToCollection.apply(this, arguments);\n      }\n\n      return addToCollection;\n    }()\n  }, {\n    key: \"deleteBook\",\n    value: function () {\n      var _deleteBook = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(request, response) {\n        var bookId, token, validated, result;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                console.log(\"Book Delete Request accepted\");\n                bookId = request.query.bookId;\n                token = request.headers['x-access-token'];\n                console.log(bookId, token);\n                _context6.prev = 4;\n                validated = this.tokenService.validateToken(token);\n\n                if (validated) {\n                  _context6.next = 8;\n                  break;\n                }\n\n                throw new ErrorWithHttpCode(400, \"Error validating token\");\n\n              case 8:\n                _context6.next = 10;\n                return this.userBooksService.deleteBookFromCollection(validated.id, bookId);\n\n              case 10:\n                result = _context6.sent;\n                response.json(result);\n                _context6.next = 17;\n                break;\n\n              case 14:\n                _context6.prev = 14;\n                _context6.t0 = _context6[\"catch\"](4);\n                response.status(_context6.t0.httpCode).json(_context6.t0);\n\n              case 17:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[4, 14]]);\n      }));\n\n      function deleteBook(_x11, _x12) {\n        return _deleteBook.apply(this, arguments);\n      }\n\n      return deleteBook;\n    }()\n  }, {\n    key: \"setFavorite\",\n    value: function () {\n      var _setFavorite = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(request, response) {\n        var book, token, validated, result;\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                console.log(\"Favorite book request accepted\");\n                book = request.body.book;\n                token = request.headers['x-access-token'];\n                console.log(book, token);\n                _context7.prev = 4;\n                validated = this.tokenService.validateToken(token);\n\n                if (validated) {\n                  _context7.next = 8;\n                  break;\n                }\n\n                throw new ErrorWithHttpCode(400, \"Error validating token\");\n\n              case 8:\n                _context7.next = 10;\n                return this.userBooksService.setFavorite(validated.id, book);\n\n              case 10:\n                result = _context7.sent;\n                response.json(result);\n                _context7.next = 17;\n                break;\n\n              case 14:\n                _context7.prev = 14;\n                _context7.t0 = _context7[\"catch\"](4);\n                response.status(_context7.t0.httpCode).json(_context7.t0);\n\n              case 17:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[4, 14]]);\n      }));\n\n      function setFavorite(_x13, _x14) {\n        return _setFavorite.apply(this, arguments);\n      }\n\n      return setFavorite;\n    }()\n  }, {\n    key: \"getFavoriteBooks\",\n    value: function () {\n      var _getFavoriteBooks = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(request, response) {\n        var token, validated, result;\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                console.log(\"Get favorite books request accepted\");\n                token = request.headers['x-access-token'];\n                console.log(token);\n                _context8.prev = 3;\n                validated = this.tokenService.validateToken(token);\n\n                if (validated) {\n                  _context8.next = 7;\n                  break;\n                }\n\n                throw new ErrorWithHttpCode(400, \"Error validating token\");\n\n              case 7:\n                _context8.next = 9;\n                return this.userBooksService.getFavorites(validated.id);\n\n              case 9:\n                result = _context8.sent;\n                response.json(result);\n                _context8.next = 16;\n                break;\n\n              case 13:\n                _context8.prev = 13;\n                _context8.t0 = _context8[\"catch\"](3);\n                response.status(_context8.t0.httpCode).json(_context8.t0);\n\n              case 16:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[3, 13]]);\n      }));\n\n      function getFavoriteBooks(_x15, _x16) {\n        return _getFavoriteBooks.apply(this, arguments);\n      }\n\n      return getFavoriteBooks;\n    }()\n  }, {\n    key: \"updateBook\",\n    value: function () {\n      var _updateBook = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9(request, response) {\n        var book, token, validated, result;\n        return regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                console.log(\"Update Book request accepted\");\n                book = request.body.book;\n                token = request.headers['x-access-token'];\n                console.log(book, token);\n                _context9.prev = 4;\n                validated = this.tokenService.validateToken(token);\n\n                if (validated) {\n                  _context9.next = 8;\n                  break;\n                }\n\n                throw new ErrorWithHttpCode(400, \"Error validating token\");\n\n              case 8:\n                _context9.next = 10;\n                return this.userBooksService.updateBook(validated.id, book);\n\n              case 10:\n                result = _context9.sent;\n                console.log(\"result\" + result);\n                response.json(result);\n                _context9.next = 18;\n                break;\n\n              case 15:\n                _context9.prev = 15;\n                _context9.t0 = _context9[\"catch\"](4);\n                response.status(_context9.t0.httpCode).json(_context9.t0);\n\n              case 18:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[4, 15]]);\n      }));\n\n      function updateBook(_x17, _x18) {\n        return _updateBook.apply(this, arguments);\n      }\n\n      return updateBook;\n    }()\n  }, {\n    key: \"getUserGenres\",\n    value: function () {\n      var _getUserGenres = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10(request, response) {\n        var token, validated, result;\n        return regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                console.log(\"GET User Genres request accepted\");\n                token = request.headers[\"x-access-token\"];\n                _context10.prev = 2;\n                validated = this.tokenService.validateToken(token);\n\n                if (validated) {\n                  _context10.next = 6;\n                  break;\n                }\n\n                throw new ErrorWithHttpCode(400, \"Error validating token\");\n\n              case 6:\n                _context10.next = 8;\n                return this.userBooksService.getUserGenres(validated.id);\n\n              case 8:\n                result = _context10.sent;\n                response.json(result);\n                _context10.next = 15;\n                break;\n\n              case 12:\n                _context10.prev = 12;\n                _context10.t0 = _context10[\"catch\"](2);\n                response.status(_context10.t0.httpCode).json(_context10.t0);\n\n              case 15:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this, [[2, 12]]);\n      }));\n\n      function getUserGenres(_x19, _x20) {\n        return _getUserGenres.apply(this, arguments);\n      }\n\n      return getUserGenres;\n    }()\n  }]);\n\n  return UserController;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (new UserController(userService, userBooksService, tokenService));\n\n//# sourceURL=webpack:///./api/controllers/userController.js?");

/***/ }),

/***/ "./api/error/ErrorWithHttpCode.js":
/*!****************************************!*\
  !*** ./api/error/ErrorWithHttpCode.js ***!
  \****************************************/
/*! exports provided: ErrorWithHttpCode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ErrorWithHttpCode\", function() { return ErrorWithHttpCode; });\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar ErrorWithHttpCode = /*#__PURE__*/function (_Error) {\n  _inherits(ErrorWithHttpCode, _Error);\n\n  var _super = _createSuper(ErrorWithHttpCode);\n\n  function ErrorWithHttpCode(httpCode) {\n    var _this;\n\n    _classCallCheck(this, ErrorWithHttpCode);\n\n    for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      params[_key - 1] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(params));\n    _this.httpCode = httpCode;\n    return _this;\n  }\n\n  return ErrorWithHttpCode;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\n//# sourceURL=webpack:///./api/error/ErrorWithHttpCode.js?");

/***/ }),

/***/ "./api/model/Book.js":
/*!***************************!*\
  !*** ./api/model/Book.js ***!
  \***************************/
/*! exports provided: Book */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Book\", function() { return Book; });\n/* harmony import */ var _UserData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UserData */ \"./api/model/UserData.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\nvar Book = function Book(isbn, id, title, imgUrl, smallImgUrl, desc, pubYear, goodreadsRating, pages, authors, series, genres) {\n  _classCallCheck(this, Book);\n\n  this.isbn = isbn;\n  this.id = id;\n  this.title = title;\n  this.imageUrl = imgUrl;\n  this.smallImageUrl = smallImgUrl;\n  this.description = desc;\n  this.publishedYear = pubYear;\n  this.goodreadsRating = goodreadsRating;\n  this.pages = pages;\n  this.authors = authors;\n  this.series = series;\n  this.genres = genres;\n  this.userData = new _UserData__WEBPACK_IMPORTED_MODULE_0__[\"UserData\"]();\n};\n\n//# sourceURL=webpack:///./api/model/Book.js?");

/***/ }),

/***/ "./api/model/UserData.js":
/*!*******************************!*\
  !*** ./api/model/UserData.js ***!
  \*******************************/
/*! exports provided: UserData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UserData\", function() { return UserData; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar UserData = function UserData() {\n  _classCallCheck(this, UserData);\n\n  this.status = \"not reading\";\n  this.rating = 0;\n  this.pagesRead = 0;\n  this.isFavorited = false;\n  this.startDate = \"\";\n  this.endDate = \"\";\n  this.notes = \"\";\n};\n\n//# sourceURL=webpack:///./api/model/UserData.js?");

/***/ }),

/***/ "./api/routes/routes.js":
/*!******************************!*\
  !*** ./api/routes/routes.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _controllers_authController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../controllers/authController */ \"./api/controllers/authController.js\");\n/* harmony import */ var _controllers_bookController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../controllers/bookController */ \"./api/controllers/bookController.js\");\n/* harmony import */ var _controllers_userController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../controllers/userController */ \"./api/controllers/userController.js\");\n/* harmony import */ var _controllers_seriesController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../controllers/seriesController */ \"./api/controllers/seriesController.js\");\n/* harmony import */ var _controllers_authorController__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../controllers/authorController */ \"./api/controllers/authorController.js\");\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (function (app) {\n  app.post(\"/auth/login\", _controllers_authController__WEBPACK_IMPORTED_MODULE_0__[\"default\"].signInUser);\n  app.post(\"/auth/register\", _controllers_authController__WEBPACK_IMPORTED_MODULE_0__[\"default\"].signUpUser);\n  app.get(\"/books/search\", _controllers_bookController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].searchByTitleOrAuthor);\n  app.get(\"/books/:bookId\", _controllers_bookController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getBookById);\n  app.get(\"/user\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getUser);\n  app.get(\"/user/books\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getUserBooks);\n  app.get(\"/user/books/favorite\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getFavoriteBooks);\n  app.post(\"/user/books/favorite\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].setFavorite);\n  app.get(\"/user/genres\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getUserGenres);\n  app.get(\"/user/books/:collection\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getCollection);\n  app.post(\"/user/books/:collection\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].addToCollection);\n  app[\"delete\"](\"/user/books\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].deleteBook);\n  app.put(\"/user/books\", _controllers_userController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateBook);\n  app.get(\"/series/:id\", _controllers_seriesController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getSeriesById);\n  app.get(\"/author/:id\", _controllers_authorController__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getAuthorInfo);\n  app.get(\"/author/:id/series\", _controllers_authorController__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getAuthorSeries);\n});\n\n//# sourceURL=webpack:///./api/routes/routes.js?");

/***/ }),

/***/ "./api/server.js":
/*!***********************!*\
  !*** ./api/server.js ***!
  \***********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_stable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/stable */ \"core-js/stable\");\n/* harmony import */ var core_js_stable__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_stable__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! regenerator-runtime/runtime */ \"regenerator-runtime/runtime\");\n/* harmony import */ var regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var body_parser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! body-parser */ \"body-parser\");\n/* harmony import */ var body_parser__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(body_parser__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! cors */ \"cors\");\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(cors__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _routes_routes_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./routes/routes.js */ \"./api/routes/routes.js\");\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! firebase/app */ \"firebase/app\");\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(firebase_app__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\nvar app = express__WEBPACK_IMPORTED_MODULE_3___default()();\nvar port = 4200;\napp.use(cors__WEBPACK_IMPORTED_MODULE_5___default()());\napp.use(body_parser__WEBPACK_IMPORTED_MODULE_4___default.a.urlencoded({\n  extended: false\n}));\napp.use(body_parser__WEBPACK_IMPORTED_MODULE_4___default.a.json());\n\nObject(_routes_routes_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(app);\n\nvar firebaseConfig = {\n  apiKey: \"AIzaSyBJquLDDsi6VJl8kJQ8zRqAHHyGG0SLD9o\",\n  authDomain: \"bookshelf-a2203.firebaseapp.com\",\n  databaseURL: \"https://bookshelf-a2203.firebaseio.com\",\n  projectId: \"bookshelf-a2203\",\n  storageBucket: \"bookshelf-a2203.appspot.com\",\n  messagingSenderId: \"942217212778\",\n  appId: \"1:942217212778:web:2795a60ea9260c875f6b13\",\n  measurementId: \"G-SV2WRHQ6G2\"\n};\nfirebase_app__WEBPACK_IMPORTED_MODULE_7___default.a.initializeApp(firebaseConfig);\napp.all(\"/*\", function (req, res, next) {\n  // CORS headers\n  res.header(\"Access-Control-Allow-Origin\", \"*\"); // restrict it to the required domain\n\n  res.header(\"Access-Control-Allow-Methods\", \"GET,PUT,POST,DELETE,OPTIONS\"); // Set custom headers for CORS\n\n  res.header(\"Access-Control-Allow-Headers\", \"Content-type,Accept,X-Access-Token,X-Key\");\n\n  if (req.method == \"OPTIONS\") {\n    res.status(200).end();\n  } else {\n    next();\n  }\n});\napp.listen(port, function () {\n  return console.log(\"Started on port \".concat(port, \"!\"));\n});\n\n//# sourceURL=webpack:///./api/server.js?");

/***/ }),

/***/ "./api/services/authService.js":
/*!*************************************!*\
  !*** ./api/services/authService.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase */ \"firebase\");\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(firebase__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\nvar AuthService = /*#__PURE__*/function () {\n  function AuthService(tokenService) {\n    _classCallCheck(this, AuthService);\n\n    this.tokenService = tokenService;\n    this.getUser = this.getUser.bind(this);\n    this.createUser = this.createUser.bind(this);\n  }\n\n  _createClass(AuthService, [{\n    key: \"getUser\",\n    value: function () {\n      var _getUser = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(email, password) {\n        var existingUser, user, snapshot, key, dbUser, token;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                existingUser = {};\n                _context.prev = 1;\n                _context.next = 4;\n                return firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth().signInWithEmailAndPassword(email, password);\n\n              case 4:\n                user = _context.sent;\n                existingUser.email = user.user.email;\n                _context.next = 8;\n                return firebase__WEBPACK_IMPORTED_MODULE_1___default.a.database().ref(\"users\").orderByChild(\"email\").equalTo(existingUser.email).once(\"value\");\n\n              case 8:\n                snapshot = _context.sent;\n\n                if (snapshot.val()) {\n                  _context.next = 11;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](404, \"User data associated with user email \".concat(email));\n\n              case 11:\n                snapshot.forEach(function (e) {\n                  return key = e.key;\n                });\n                dbUser = snapshot.val()[key];\n                existingUser.id = key;\n                existingUser.books = dbUser.books || [];\n                token = this.tokenService.createToken({\n                  id: key\n                }, 1000000); //change expire date!\n\n                console.log(existingUser.id);\n                return _context.abrupt(\"return\", {\n                  user: existingUser,\n                  token: token\n                });\n\n              case 20:\n                _context.prev = 20;\n                _context.t0 = _context[\"catch\"](1);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](_context.t0.httpCode || 500, _context.t0.message);\n\n              case 23:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 20]]);\n      }));\n\n      function getUser(_x, _x2) {\n        return _getUser.apply(this, arguments);\n      }\n\n      return getUser;\n    }()\n  }, {\n    key: \"createUser\",\n    value: function () {\n      var _createUser = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(email, password) {\n        var newUser, user, data, token;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return firebase__WEBPACK_IMPORTED_MODULE_1___default.a.auth().createUserWithEmailAndPassword(email, password);\n\n              case 3:\n                user = _context2.sent;\n                newUser = {\n                  email: user.user.email,\n                  books: []\n                };\n                _context2.next = 7;\n                return firebase__WEBPACK_IMPORTED_MODULE_1___default.a.database().ref(\"users\").push(newUser);\n\n              case 7:\n                data = _context2.sent;\n                newUser.id = data.key;\n                token = this.tokenService.createToken({\n                  id: data.key\n                }, 2592000);\n                return _context2.abrupt(\"return\", {\n                  user: newUser,\n                  token: token\n                });\n\n              case 13:\n                _context2.prev = 13;\n                _context2.t0 = _context2[\"catch\"](0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](_context2.t0.httpCode || 500, _context2.t0.message);\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 13]]);\n      }));\n\n      function createUser(_x3, _x4) {\n        return _createUser.apply(this, arguments);\n      }\n\n      return createUser;\n    }()\n  }]);\n\n  return AuthService;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AuthService);\n\n//# sourceURL=webpack:///./api/services/authService.js?");

/***/ }),

/***/ "./api/services/formatting/formatAuthorService.js":
/*!********************************************************!*\
  !*** ./api/services/formatting/formatAuthorService.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _formatBaseService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./formatBaseService */ \"./api/services/formatting/formatBaseService.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\nvar FormatAuthorService = /*#__PURE__*/function (_FormatBookService) {\n  _inherits(FormatAuthorService, _FormatBookService);\n\n  var _super = _createSuper(FormatAuthorService);\n\n  function FormatAuthorService() {\n    _classCallCheck(this, FormatAuthorService);\n\n    return _super.call(this);\n  }\n\n  _createClass(FormatAuthorService, [{\n    key: \"formatAuthorForAuthorPage\",\n    value: function formatAuthorForAuthorPage(author, books) {\n      return {\n        id: author.id._text,\n        name: author.name._text,\n        imageUrl: author.large_image_url._cdata,\n        about: this.formatDescription(author.about._cdata),\n        workCount: author.works_count._text,\n        bornDate: author.born_at._text,\n        deathDate: author.died_at._text,\n        bookIds: this.formatAuthorBooks(books)\n      };\n    }\n  }, {\n    key: \"formatAuthorBooks\",\n    value: function formatAuthorBooks(books) {\n      var authorBooks = books.book;\n      return this.mapArrayIds(authorBooks);\n    }\n  }]);\n\n  return FormatAuthorService;\n}(_formatBaseService__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FormatAuthorService);\n\n//# sourceURL=webpack:///./api/services/formatting/formatAuthorService.js?");

/***/ }),

/***/ "./api/services/formatting/formatBaseService.js":
/*!******************************************************!*\
  !*** ./api/services/formatting/formatBaseService.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\n/* harmony import */ var _model_Book__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../model/Book */ \"./api/model/Book.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar genresExceptions = [\"to-read\", \"currently-reading\", \"owned\", \"default\", \"favorites\", \"books-i-own\", \"ebook\", \"kindle\", \"library\", \"audiobook\", \"owned-books\", \"audiobooks\", \"my-books\", \"ebooks\", \"to-buy\", \"english\", \"calibre\", \"books\", \"british\", \"audio\", \"my-library\", \"favourites\", \"re-read\", \"general\", \"e-books\", \"fiction\", \"ya\", \"series\", \"classic\"];\n\nvar FormatBookService = /*#__PURE__*/function () {\n  function FormatBookService() {\n    _classCallCheck(this, FormatBookService);\n  }\n\n  _createClass(FormatBookService, [{\n    key: \"mapArrayIds\",\n    value: function mapArrayIds(array) {\n      return array.map(function (item) {\n        return item.id._text;\n      });\n    } //transform goodreads 'shelves' to genres\n    //TODO i.e Science-fiction OR Sci-fi, not BOTH\n\n  }, {\n    key: \"formatGenresForBook\",\n    value: function formatGenresForBook(shelves) {\n      var genres = shelves.filter(function (shelf) {\n        return !genresExceptions.includes(shelf._attributes.name);\n      }).map(function (genre) {\n        return genre._attributes.name.replace(/^\\w/, function (_char) {\n          return _char.toUpperCase();\n        });\n      }); //first letter toUpperCase \\fantasy => Fantasy\n\n      return genres.length > 3 ? genres.slice(0, 3) : genres;\n    }\n  }, {\n    key: \"getBookTitle\",\n    value: function getBookTitle(string) {\n      if (!string) return null;\n      var stringTitle = string;\n      var seriesSeparator = stringTitle.indexOf(\"(\");\n      var title = stringTitle.substring(0, seriesSeparator > 0 ? seriesSeparator : stringTitle.length).trim();\n      return title;\n    }\n  }, {\n    key: \"formatDescription\",\n    value: function formatDescription(descr) {\n      if (!descr) return \"\";\n      var newD = descr.replace(new RegExp(/<br\\s*\\/?>/g), \"\\n\"); //replace html line-breaks with \\n\n\n      newD = newD.replace(new RegExp(/<[^>]*>/g), \"\"); //replace all other html tags\n\n      return newD;\n    }\n  }, {\n    key: \"formatSeriesForBook\",\n    value: function formatSeriesForBook(series) {\n      if (Array.isArray(series)) {\n        series = series[0];\n      }\n\n      return series ? {\n        id: series.series.id._text,\n        fullName: \"(\".concat(series.series.title._cdata.trim(), \" #\").concat(series.user_position._text, \")\")\n      } : null;\n    }\n  }, {\n    key: \"formatAuthor\",\n    value: function formatAuthor(authors) {\n      return Array.isArray(authors) ? this.getAllBookAuthors(authors) : [this.mapAuthor(authors)];\n    }\n  }, {\n    key: \"formatAuthorForSearch\",\n    value: function formatAuthorForSearch(authors) {\n      return Array.isArray(authors) ? authors[0].name._text : authors.name._text;\n    }\n  }, {\n    key: \"getAllBookAuthors\",\n    value: function getAllBookAuthors(authors) {\n      var _this = this;\n\n      return authors.filter(function (author) {\n        return !author.role._text;\n      }).map(function (author) {\n        return _this.mapAuthor(author);\n      });\n    }\n  }, {\n    key: \"mapAuthor\",\n    value: function mapAuthor(author) {\n      return {\n        id: author.id._text,\n        name: author.name._text,\n        imageUrl: author.image_url._cdata,\n        smallImageUrl: author.small_image_url._cdata,\n        goodreadsRating: author.average_rating._text\n      };\n    }\n  }]);\n\n  return FormatBookService;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FormatBookService);\n\n//# sourceURL=webpack:///./api/services/formatting/formatBaseService.js?");

/***/ }),

/***/ "./api/services/formatting/formatBookService.js":
/*!******************************************************!*\
  !*** ./api/services/formatting/formatBookService.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _formatBaseService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./formatBaseService */ \"./api/services/formatting/formatBaseService.js\");\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\n/* harmony import */ var _model_Book__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../model/Book */ \"./api/model/Book.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\nvar FormatBookService = /*#__PURE__*/function (_FormatBaseService) {\n  _inherits(FormatBookService, _FormatBaseService);\n\n  var _super = _createSuper(FormatBookService);\n\n  function FormatBookService() {\n    _classCallCheck(this, FormatBookService);\n\n    return _super.call(this);\n  }\n\n  _createClass(FormatBookService, [{\n    key: \"getBookISBN\",\n    value: function getBookISBN(book) {\n      return book.isbn13._cdata;\n    }\n  }, {\n    key: \"formatBookForSearch\",\n    value: function formatBookForSearch(book) {\n      try {\n        return {\n          id: book.id._text,\n          title: book.title._text || book.title._cdata,\n          imageUrl: book.image_url._text,\n          author: this.formatAuthorForSearch(book.author)\n        };\n      } catch (error) {\n        console.log(error);\n        throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Failed to retrieve data from book\");\n      }\n    }\n  }, {\n    key: \"formatBookForBookPage\",\n    value: function formatBookForBookPage(book) {\n      try {\n        var formatted = {\n          isbn: book.isbn13._cdata,\n          id: book.id._text,\n          title: this.getBookTitle(book.title._text) || this.getBookTitle(book.title._cdata),\n          imageUrl: book.image_url._text,\n          smallImageUrl: book.small_image_url._text,\n          description: this.formatDescription(book.description._cdata),\n          publishedYear: book.work.original_publication_year._text,\n          goodreadsRating: book.average_rating._text,\n          pages: book.num_pages._cdata\n        };\n        formatted.authors = this.formatAuthor(book.authors.author);\n        formatted.series = this.formatSeriesForBook(book.series_works.series_work);\n        formatted.genres = this.formatGenresForBook(book.popular_shelves.shelf);\n        return new _model_Book__WEBPACK_IMPORTED_MODULE_2__[\"Book\"](formatted.isbn, formatted.id, formatted.title, formatted.imageUrl, formatted.smallImageUrl, formatted.description, formatted.publishedYear, formatted.goodreadsRating, formatted.pages, formatted.authors, formatted.series, formatted.genres);\n      } catch (error) {\n        console.log(error);\n        throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, \"Failed to retrieve data from book\");\n      }\n    }\n  }]);\n\n  return FormatBookService;\n}(_formatBaseService__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FormatBookService);\n\n//# sourceURL=webpack:///./api/services/formatting/formatBookService.js?");

/***/ }),

/***/ "./api/services/formatting/formatSeriesService.js":
/*!********************************************************!*\
  !*** ./api/services/formatting/formatSeriesService.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _formatBaseService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./formatBaseService */ \"./api/services/formatting/formatBaseService.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\nvar FormatSeriesService = /*#__PURE__*/function (_FormatBookService) {\n  _inherits(FormatSeriesService, _FormatBookService);\n\n  var _super = _createSuper(FormatSeriesService);\n\n  function FormatSeriesService() {\n    _classCallCheck(this, FormatSeriesService);\n\n    return _super.call(this);\n  }\n\n  _createClass(FormatSeriesService, [{\n    key: \"formatSeriesAuthor\",\n    value: function formatSeriesAuthor(author) {\n      return author.name._text;\n    }\n  }, {\n    key: \"formatSeriesForAuthorPage\",\n    value: function formatSeriesForAuthorPage(series) {\n      var mapped = series.filter(function (item, i, self) {\n        return i === self.findIndex(function (elem) {\n          var elemTitle = elem.series.title._cdata;\n          var itemTitle = item.series.title._cdata;\n          return elemTitle.toLowerCase() === itemTitle.toLowerCase();\n        });\n      }).map(function (item) {\n        return {\n          id: item.series.id._text,\n          title: item.series.title._cdata,\n          rating: item.work.ratings_sum._text\n        };\n      }).sort(function (a, b) {\n        return b.rating - a.rating;\n      });\n      return mapped;\n    }\n  }, {\n    key: \"formatSeriesForSeriesPage\",\n    value: function formatSeriesForSeriesPage(series) {\n      var result = {\n        id: series.id._text,\n        title: series.title._cdata,\n        workCount: series.primary_work_count._text,\n        allWorks: series.series_works_count._text\n      };\n      result.bookIds = this.formatSeriesWork(series, result.workCount);\n      return result;\n    }\n  }, {\n    key: \"formatSeriesWork\",\n    value: function formatSeriesWork(series, workCount) {\n      var seriesWork = series.series_works.series_work;\n      var result = seriesWork.slice(0, workCount);\n      return result.map(function (work) {\n        var book = work.work.best_book;\n        return book.id._text;\n      });\n    }\n  }]);\n\n  return FormatSeriesService;\n}(_formatBaseService__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FormatSeriesService);\n\n//# sourceURL=webpack:///./api/services/formatting/formatSeriesService.js?");

/***/ }),

/***/ "./api/services/goodreads/goodreadsAuthorService.js":
/*!**********************************************************!*\
  !*** ./api/services/goodreads/goodreadsAuthorService.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _goodreadsBaseService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./goodreadsBaseService */ \"./api/services/goodreads/goodreadsBaseService.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\nvar GoodreadsAuthorService = /*#__PURE__*/function (_GoodreadsBaseService) {\n  _inherits(GoodreadsAuthorService, _GoodreadsBaseService);\n\n  var _super = _createSuper(GoodreadsAuthorService);\n\n  function GoodreadsAuthorService(formatAuthorService, formatSeriesService) {\n    var _this;\n\n    _classCallCheck(this, GoodreadsAuthorService);\n\n    _this = _super.call(this);\n    _this.formatAuthorService = formatAuthorService;\n    _this.formatSeriesService = formatSeriesService;\n    return _this;\n  }\n\n  _createClass(GoodreadsAuthorService, [{\n    key: \"getAuthorByGoodreadsId\",\n    value: function () {\n      var _getAuthorByGoodreadsId = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(id) {\n        var url, converted, author, books;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                url = \"\".concat(this.root, \"author/show/\").concat(id, \"?key=\").concat(this.devKey);\n                _context.next = 4;\n                return this.getValueFromGoodreads(url);\n\n              case 4:\n                converted = _context.sent;\n                author = this.findValue(converted, \"author\");\n                books = this.findValue(converted, \"books\");\n\n                if (!(!author || !books)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                throw new ErrorWithHttpCode(404, \"Data was not found\");\n\n              case 9:\n                author = this.formatAuthorService.formatAuthorForAuthorPage(author, books);\n                return _context.abrupt(\"return\", author);\n\n              case 13:\n                _context.prev = 13;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0);\n                throw new ErrorWithHttpCode(_context.t0.httpCode || 500, _context.t0.message);\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 13]]);\n      }));\n\n      function getAuthorByGoodreadsId(_x) {\n        return _getAuthorByGoodreadsId.apply(this, arguments);\n      }\n\n      return getAuthorByGoodreadsId;\n    }()\n  }, {\n    key: \"getAuthorSeries\",\n    value: function () {\n      var _getAuthorSeries = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(id) {\n        var url, converted, value, series;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                url = \"\".concat(this.root, \"series/list/\").concat(id, \".xml?key=\").concat(this.devKey);\n                _context2.next = 4;\n                return this.getValueFromGoodreads(url);\n\n              case 4:\n                converted = _context2.sent;\n                value = this.findValue(converted, \"series_work\");\n\n                if (value) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                throw new ErrorWithHttpCode(404, \"Data was not found\");\n\n              case 8:\n                series = this.formatSeriesService.formatSeriesForAuthorPage(value);\n                return _context2.abrupt(\"return\", series);\n\n              case 12:\n                _context2.prev = 12;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n                throw new ErrorWithHttpCode(_context2.t0.httpCode || 500, _context2.t0.message);\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 12]]);\n      }));\n\n      function getAuthorSeries(_x2) {\n        return _getAuthorSeries.apply(this, arguments);\n      }\n\n      return getAuthorSeries;\n    }()\n  }]);\n\n  return GoodreadsAuthorService;\n}(_goodreadsBaseService__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (GoodreadsAuthorService);\n\n//# sourceURL=webpack:///./api/services/goodreads/goodreadsAuthorService.js?");

/***/ }),

/***/ "./api/services/goodreads/goodreadsBaseService.js":
/*!********************************************************!*\
  !*** ./api/services/goodreads/goodreadsBaseService.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var xml_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! xml-js */ \"xml-js\");\n/* harmony import */ var xml_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(xml_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\nvar dev_key = process.env.GOODREADS_KEY;\nvar root = \"https://www.goodreads.com/\";\nvar abeBooksUrl = \"https://pictures.abebooks.com/isbn/\";\nvar defaultImgUrl = \"https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png\";\n\nvar GoodreadsBaseService = /*#__PURE__*/function () {\n  function GoodreadsBaseService() {\n    _classCallCheck(this, GoodreadsBaseService);\n  }\n\n  _createClass(GoodreadsBaseService, [{\n    key: \"getValueFromGoodreads\",\n    value: function () {\n      var _getValueFromGoodreads = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(url) {\n        var response, xml, converted;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return axios__WEBPACK_IMPORTED_MODULE_1___default.a.get(url);\n\n              case 3:\n                response = _context.sent;\n\n                if (!(response.status >= 300)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_3__[\"ErrorWithHttpCode\"](response.status, response.body.message);\n\n              case 6:\n                xml = response.data;\n                converted = xml_js__WEBPACK_IMPORTED_MODULE_2___default.a.xml2js(xml, {\n                  compact: true\n                });\n                return _context.abrupt(\"return\", converted);\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_3__[\"ErrorWithHttpCode\"](500, _context.t0.message);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 11]]);\n      }));\n\n      function getValueFromGoodreads(_x) {\n        return _getValueFromGoodreads.apply(this, arguments);\n      }\n\n      return getValueFromGoodreads;\n    }()\n  }, {\n    key: \"formatImageUrl\",\n    value: function () {\n      var _formatImageUrl = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(url, isbn) {\n        var imageUrl, response;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                imageUrl = \"\";\n\n                if (!(url.includes(\"nophoto\") && isbn)) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                imageUrl = \"\".concat(abeBooksUrl).concat(isbn, \".jpg\");\n                _context2.prev = 3;\n                _context2.next = 6;\n                return axios__WEBPACK_IMPORTED_MODULE_1___default.a.get(imageUrl);\n\n              case 6:\n                response = _context2.sent;\n\n                if (!(response.status !== 404)) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", imageUrl);\n\n              case 9:\n                _context2.next = 14;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](3);\n                return _context2.abrupt(\"return\", defaultImgUrl);\n\n              case 14:\n                return _context2.abrupt(\"return\", url);\n\n              case 15:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[3, 11]]);\n      }));\n\n      function formatImageUrl(_x2, _x3) {\n        return _formatImageUrl.apply(this, arguments);\n      }\n\n      return formatImageUrl;\n    }()\n  }, {\n    key: \"findValue\",\n    value: function findValue(object, search) {\n      var _this = this;\n\n      var result;\n      Object.keys(object).some(function (key) {\n        if (key === search) {\n          result = object[key];\n          return true;\n        }\n\n        if (object[key] && _typeof(object[key]) === \"object\") {\n          result = _this.findValue(object[key], search);\n          return result !== undefined;\n        }\n      });\n      return result;\n    }\n  }, {\n    key: \"root\",\n    get: function get() {\n      return root;\n    }\n  }, {\n    key: \"devKey\",\n    get: function get() {\n      return dev_key;\n    }\n  }]);\n\n  return GoodreadsBaseService;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (GoodreadsBaseService);\n\n//# sourceURL=webpack:///./api/services/goodreads/goodreadsBaseService.js?");

/***/ }),

/***/ "./api/services/goodreads/goodreadsBookService.js":
/*!********************************************************!*\
  !*** ./api/services/goodreads/goodreadsBookService.js ***!
  \********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _goodreadsBaseService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./goodreadsBaseService */ \"./api/services/goodreads/goodreadsBaseService.js\");\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\nvar GoodreadsBookService = /*#__PURE__*/function (_GoodreadsBaseService) {\n  _inherits(GoodreadsBookService, _GoodreadsBaseService);\n\n  var _super = _createSuper(GoodreadsBookService);\n\n  function GoodreadsBookService(userService, formatBookService) {\n    var _this;\n\n    _classCallCheck(this, GoodreadsBookService);\n\n    _this = _super.call(this);\n    _this.userService = userService;\n    _this.formatBookService = formatBookService;\n    return _this;\n  }\n\n  _createClass(GoodreadsBookService, [{\n    key: \"searchBooks\",\n    value: function () {\n      var _searchBooks = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(searchQuery) {\n        var _this2 = this;\n\n        var searchUrl, converted, books, formatted;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                searchUrl = \"\".concat(this.root, \"search/index.xml?key=\").concat(this.devKey, \"&q=\").concat(searchQuery);\n                _context2.next = 4;\n                return this.getValueFromGoodreads(searchUrl);\n\n              case 4:\n                converted = _context2.sent;\n                books = this.findValue(converted, \"work\");\n\n                if (books) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](404, \"Book not found\");\n\n              case 8:\n                _context2.next = 10;\n                return Promise.all(books.slice(0, 4).map( /*#__PURE__*/function () {\n                  var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(item) {\n                    var id, isbn, book, res;\n                    return regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            id = item.best_book.id._text;\n                            _context.next = 3;\n                            return _this2.getBookISBN(id);\n\n                          case 3:\n                            isbn = _context.sent;\n                            book = _this2.findValue(item, \"best_book\");\n\n                            if (book) {\n                              _context.next = 7;\n                              break;\n                            }\n\n                            throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](404, \"Data not found\");\n\n                          case 7:\n                            res = _this2.formatBookService.formatBookForSearch(book);\n                            _context.next = 10;\n                            return _this2.formatImageUrl(res.imageUrl, isbn);\n\n                          case 10:\n                            res.imageUrl = _context.sent;\n                            return _context.abrupt(\"return\", res);\n\n                          case 12:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }));\n\n                  return function (_x2) {\n                    return _ref.apply(this, arguments);\n                  };\n                }()));\n\n              case 10:\n                formatted = _context2.sent;\n                return _context2.abrupt(\"return\", formatted);\n\n              case 14:\n                _context2.prev = 14;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](_context2.t0.httpCode || 500, _context2.t0.message);\n\n              case 18:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 14]]);\n      }));\n\n      function searchBooks(_x) {\n        return _searchBooks.apply(this, arguments);\n      }\n\n      return searchBooks;\n    }()\n  }, {\n    key: \"getBookISBN\",\n    value: function () {\n      var _getBookISBN = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(id) {\n        var book;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return this.getBookByGoodreadsId(id);\n\n              case 3:\n                book = _context3.sent;\n                return _context3.abrupt(\"return\", this.formatBookService.getBookISBN(book));\n\n              case 7:\n                _context3.prev = 7;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.log(_context3.t0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](_context3.t0.httpCode || 500, _context3.t0.message);\n\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 7]]);\n      }));\n\n      function getBookISBN(_x3) {\n        return _getBookISBN.apply(this, arguments);\n      }\n\n      return getBookISBN;\n    }()\n  }, {\n    key: \"getBookWithUserData\",\n    value: function () {\n      var _getBookWithUserData = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(bookId, userId) {\n        var book, formatted;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return this.getBookByGoodreadsId(bookId);\n\n              case 3:\n                book = _context4.sent;\n                formatted = this.formatBookService.formatBookForBookPage(book);\n                _context4.next = 7;\n                return this.formatImageUrl(formatted.imageUrl, formatted.isbn);\n\n              case 7:\n                formatted.imageUrl = _context4.sent;\n                formatted.smallImageUrl = formatted.imageUrl;\n                _context4.next = 11;\n                return this.fetchUserBookData(userId, formatted);\n\n              case 11:\n                return _context4.abrupt(\"return\", _context4.sent);\n\n              case 14:\n                _context4.prev = 14;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.log(_context4.t0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](_context4.t0.httpCode || 500, _context4.t0.message);\n\n              case 18:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 14]]);\n      }));\n\n      function getBookWithUserData(_x4, _x5) {\n        return _getBookWithUserData.apply(this, arguments);\n      }\n\n      return getBookWithUserData;\n    }()\n  }, {\n    key: \"getBookByGoodreadsId\",\n    value: function () {\n      var _getBookByGoodreadsId = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(id) {\n        var url, converted, book;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                url = \"\".concat(this.root, \"book/show/\").concat(id, \".xml?key=\").concat(this.devKey);\n                _context5.next = 4;\n                return this.getValueFromGoodreads(url);\n\n              case 4:\n                converted = _context5.sent;\n                book = this.findValue(converted, \"book\");\n\n                if (book) {\n                  _context5.next = 8;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](404, \"Book with that id is not found\");\n\n              case 8:\n                return _context5.abrupt(\"return\", book);\n\n              case 11:\n                _context5.prev = 11;\n                _context5.t0 = _context5[\"catch\"](0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](_context5.t0.httpCode || 500, _context5.t0.message);\n\n              case 14:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[0, 11]]);\n      }));\n\n      function getBookByGoodreadsId(_x6) {\n        return _getBookByGoodreadsId.apply(this, arguments);\n      }\n\n      return getBookByGoodreadsId;\n    }()\n  }, {\n    key: \"fetchUserBookData\",\n    value: function () {\n      var _fetchUserBookData = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(userId, book) {\n        var user, userBookRecord;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                _context6.next = 3;\n                return this.userService.getUserById(userId);\n\n              case 3:\n                user = _context6.sent;\n                userBookRecord = user.books.find(function (item) {\n                  return item.id === book.id;\n                });\n                return _context6.abrupt(\"return\", userBookRecord ? userBookRecord : book);\n\n              case 8:\n                _context6.prev = 8;\n                _context6.t0 = _context6[\"catch\"](0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](_context6.t0.httpCode || 500, _context6.t0.message);\n\n              case 11:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[0, 8]]);\n      }));\n\n      function fetchUserBookData(_x7, _x8) {\n        return _fetchUserBookData.apply(this, arguments);\n      }\n\n      return fetchUserBookData;\n    }()\n  }]);\n\n  return GoodreadsBookService;\n}(_goodreadsBaseService__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (GoodreadsBookService);\n\n//# sourceURL=webpack:///./api/services/goodreads/goodreadsBookService.js?");

/***/ }),

/***/ "./api/services/goodreads/goodreadsSeriesService.js":
/*!**********************************************************!*\
  !*** ./api/services/goodreads/goodreadsSeriesService.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _goodreadsBaseService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./goodreadsBaseService */ \"./api/services/goodreads/goodreadsBaseService.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\nvar GoodreadsSeriesService = /*#__PURE__*/function (_GoodreadsBaseService) {\n  _inherits(GoodreadsSeriesService, _GoodreadsBaseService);\n\n  var _super = _createSuper(GoodreadsSeriesService);\n\n  function GoodreadsSeriesService(formatSeriesService) {\n    var _this;\n\n    _classCallCheck(this, GoodreadsSeriesService);\n\n    _this = _super.call(this);\n    _this.formatSeriesService = formatSeriesService;\n    return _this;\n  }\n\n  _createClass(GoodreadsSeriesService, [{\n    key: \"getSeriesByGoodreadsId\",\n    value: function () {\n      var _getSeriesByGoodreadsId = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(id) {\n        var url, converted, series, author, result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                url = \"\".concat(this.root, \"series/\").concat(id, \"?key=\").concat(this.devKey);\n                _context.next = 4;\n                return this.getValueFromGoodreads(url);\n\n              case 4:\n                converted = _context.sent;\n                series = this.findValue(converted, \"series\");\n                author = this.findValue(series, \"author\");\n\n                if (series) {\n                  _context.next = 9;\n                  break;\n                }\n\n                throw new ErrorWithHttpCode(404, \"Data was not found\");\n\n              case 9:\n                result = this.formatSeriesService.formatSeriesForSeriesPage(series);\n                result.author = this.formatSeriesService.formatSeriesAuthor(author);\n                return _context.abrupt(\"return\", result);\n\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](0);\n                throw new ErrorWithHttpCode(_context.t0.httpCode || 500, _context.t0.message);\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 14]]);\n      }));\n\n      function getSeriesByGoodreadsId(_x) {\n        return _getSeriesByGoodreadsId.apply(this, arguments);\n      }\n\n      return getSeriesByGoodreadsId;\n    }()\n  }]);\n\n  return GoodreadsSeriesService;\n}(_goodreadsBaseService__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (GoodreadsSeriesService);\n\n//# sourceURL=webpack:///./api/services/goodreads/goodreadsSeriesService.js?");

/***/ }),

/***/ "./api/services/tokenService.js":
/*!**************************************!*\
  !*** ./api/services/tokenService.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dotenv/config */ \"dotenv/config\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\nvar TokenService = /*#__PURE__*/function () {\n  function TokenService() {\n    _classCallCheck(this, TokenService);\n\n    this.createToken = this.createToken.bind(this);\n    this.validateToken = this.validateToken.bind(this);\n  }\n\n  _createClass(TokenService, [{\n    key: \"createToken\",\n    value: function createToken(user, expire) {\n      if (!user || expire <= 0) throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](400, \"Error creating a token\");\n      return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default.a.sign(user, process.env.JWT_KEY, {\n        expiresIn: expire\n      });\n    }\n  }, {\n    key: \"validateToken\",\n    value: function validateToken(token) {\n      console.log(token);\n      if (!token) throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](401, \"Token is invalid\");\n      return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default.a.verify(token, process.env.JWT_KEY, function (error, decoded) {\n        if (error) {\n          console.log(\"Failed to validate\");\n\n          if (error.message === \"jwt expired\") {\n            console.log(\"Expired\");\n            throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](401, \"Token has expired\");\n          }\n\n          throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_2__[\"ErrorWithHttpCode\"](500, \"Failed to authenticate token\");\n        }\n\n        console.log(\"decoded\", decoded);\n        return decoded;\n      });\n    }\n  }]);\n\n  return TokenService;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (TokenService);\n\n//# sourceURL=webpack:///./api/services/tokenService.js?");

/***/ }),

/***/ "./api/services/userBooksService.js":
/*!******************************************!*\
  !*** ./api/services/userBooksService.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase */ \"firebase\");\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\n/* harmony import */ var _model_UserData__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../model/UserData */ \"./api/model/UserData.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\nvar UserBooksService = /*#__PURE__*/function () {\n  function UserBooksService(userService) {\n    _classCallCheck(this, UserBooksService);\n\n    this.userService = userService;\n    this.getUserBooks = this.getUserBooks.bind(this);\n    this.getUserCollection = this.getUserCollection.bind(this);\n    this.addToUserCollection = this.addToUserCollection.bind(this);\n    this.deleteBookFromCollection = this.deleteBookFromCollection.bind(this);\n    this.setFavorite = this.setFavorite.bind(this);\n    this.getFavorites = this.getFavorites.bind(this);\n    this.updateBook = this.updateBook.bind(this);\n    this.finishBook = this.finishBook.bind(this);\n  }\n\n  _createClass(UserBooksService, [{\n    key: \"getUserBooks\",\n    value: function () {\n      var _getUserBooks = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(id) {\n        var user;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return this.userService.getUserById(id);\n\n              case 3:\n                user = _context.sent;\n                return _context.abrupt(\"return\", user.books || []);\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](_context.t0.httpCode || 500, _context.t0.message);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 7]]);\n      }));\n\n      function getUserBooks(_x) {\n        return _getUserBooks.apply(this, arguments);\n      }\n\n      return getUserBooks;\n    }()\n  }, {\n    key: \"getUserCollection\",\n    value: function () {\n      var _getUserCollection = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(id, collection) {\n        var books, array;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return this.getUserBooks(id);\n\n              case 3:\n                books = _context2.sent;\n                array = books.filter(function (book) {\n                  return book.status === collection;\n                });\n\n                if (array) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, error.message);\n\n              case 7:\n                return _context2.abrupt(\"return\", array);\n\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2[\"catch\"](0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](_context2.t0.httpCode || 500, _context2.t0.message || \"Ooops! Something went wrong on the server!\");\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 10]]);\n      }));\n\n      function getUserCollection(_x2, _x3) {\n        return _getUserCollection.apply(this, arguments);\n      }\n\n      return getUserCollection;\n    }()\n  }, {\n    key: \"addToUserCollection\",\n    value: function () {\n      var _addToUserCollection = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(id, collection, book) {\n        var books, bookRef;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return this.getUserBooks(id);\n\n              case 3:\n                books = _context3.sent;\n                bookRef = books.find(function (item) {\n                  return item.id === book.id;\n                });\n\n                if (bookRef) {\n                  bookRef.userData.status = collection;\n                } else {\n                  book.userData.status = collection;\n                  books.push(book);\n                }\n\n                _context3.next = 8;\n                return firebase__WEBPACK_IMPORTED_MODULE_0___default.a.database().ref(\"users\").child(id).update({\n                  books: books\n                }, function (error) {\n                  if (error) throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, error.message);\n                });\n\n              case 8:\n                console.log(books);\n                return _context3.abrupt(\"return\", books.find(function (item) {\n                  return item.id === book.id;\n                }));\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](_context3.t0.httpCode || 500, _context3.t0.message || \"Ooops! Something went wrong on the server!\");\n\n              case 15:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 12]]);\n      }));\n\n      function addToUserCollection(_x4, _x5, _x6) {\n        return _addToUserCollection.apply(this, arguments);\n      }\n\n      return addToUserCollection;\n    }()\n  }, {\n    key: \"deleteBookFromCollection\",\n    value: function () {\n      var _deleteBookFromCollection = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(id, bookId) {\n        var books, bookRef;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return this.getUserBooks(id);\n\n              case 3:\n                books = _context4.sent;\n                bookRef = books.find(function (item) {\n                  return item.id === bookId;\n                });\n\n                if (!bookRef) {\n                  _context4.next = 13;\n                  break;\n                }\n\n                books = books.filter(function (item) {\n                  return item.id !== bookRef.id;\n                });\n                _context4.next = 9;\n                return firebase__WEBPACK_IMPORTED_MODULE_0___default.a.database().ref(\"users\").child(id).update({\n                  books: books\n                }, function (error) {\n                  if (error) throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, error.message);\n                });\n\n              case 9:\n                bookRef.userData = new _model_UserData__WEBPACK_IMPORTED_MODULE_2__[\"UserData\"]();\n                return _context4.abrupt(\"return\", bookRef);\n\n              case 13:\n                return _context4.abrupt(\"return\", false);\n\n              case 14:\n                _context4.next = 20;\n                break;\n\n              case 16:\n                _context4.prev = 16;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.log(_context4.t0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](_context4.t0.httpCode || 500, _context4.t0.message || \"Ooops! Something went wrong on the server!\");\n\n              case 20:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 16]]);\n      }));\n\n      function deleteBookFromCollection(_x7, _x8) {\n        return _deleteBookFromCollection.apply(this, arguments);\n      }\n\n      return deleteBookFromCollection;\n    }()\n  }, {\n    key: \"setFavorite\",\n    value: function () {\n      var _setFavorite = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(id, book) {\n        var books, bookRef;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return this.getUserBooks(id);\n\n              case 3:\n                books = _context5.sent;\n                bookRef = books.find(function (item) {\n                  return item.id === book.id;\n                });\n                console.log(bookRef);\n\n                if (bookRef) {\n                  bookRef.userData.isFavorited = !book.userData.isFavorited;\n                } else {\n                  book.userData.isFavorited = !book.userData.isFavorited;\n                  books.push(book);\n                }\n\n                _context5.next = 9;\n                return firebase__WEBPACK_IMPORTED_MODULE_0___default.a.database().ref(\"users\").child(id).update({\n                  books: books\n                }, function (error) {\n                  if (error) throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](400, error.message);\n                });\n\n              case 9:\n                return _context5.abrupt(\"return\", books.find(function (item) {\n                  return item.id === book.id;\n                }));\n\n              case 12:\n                _context5.prev = 12;\n                _context5.t0 = _context5[\"catch\"](0);\n                console.log(_context5.t0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](_context5.t0.httpCode || 500, _context5.t0.message || \"Ooops! Something went wrong on the server!\");\n\n              case 16:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[0, 12]]);\n      }));\n\n      function setFavorite(_x9, _x10) {\n        return _setFavorite.apply(this, arguments);\n      }\n\n      return setFavorite;\n    }()\n  }, {\n    key: \"getFavorites\",\n    value: function () {\n      var _getFavorites = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(id) {\n        var books;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                _context6.next = 3;\n                return this.getUserBooks(id);\n\n              case 3:\n                books = _context6.sent;\n                return _context6.abrupt(\"return\", books.filter(function (item) {\n                  return item.isFavorited;\n                }));\n\n              case 7:\n                _context6.prev = 7;\n                _context6.t0 = _context6[\"catch\"](0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](_context6.t0.httpCode || 500, _context6.t0.message || \"Ooops! Something went wrong on the server!\");\n\n              case 10:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[0, 7]]);\n      }));\n\n      function getFavorites(_x11) {\n        return _getFavorites.apply(this, arguments);\n      }\n\n      return getFavorites;\n    }()\n  }, {\n    key: \"updateBook\",\n    value: function () {\n      var _updateBook = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(id, book) {\n        var books, bookRef, index, snapshot;\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                _context7.next = 3;\n                return this.getUserBooks(id);\n\n              case 3:\n                books = _context7.sent;\n                bookRef = books.find(function (item) {\n                  return item.id === book.id;\n                });\n                console.log(bookRef);\n\n                if (!bookRef) {\n                  _context7.next = 14;\n                  break;\n                }\n\n                index = books.indexOf(bookRef);\n                _context7.next = 10;\n                return firebase__WEBPACK_IMPORTED_MODULE_0___default.a.database().ref(\"users/\".concat(id, \"/books/\").concat(index)).set(book);\n\n              case 10:\n                _context7.next = 12;\n                return firebase__WEBPACK_IMPORTED_MODULE_0___default.a.database().ref(\"users/\".concat(id, \"/books/\").concat(index)).once(\"value\");\n\n              case 12:\n                snapshot = _context7.sent;\n                return _context7.abrupt(\"return\", snapshot.val());\n\n              case 14:\n                return _context7.abrupt(\"return\", book);\n\n              case 17:\n                _context7.prev = 17;\n                _context7.t0 = _context7[\"catch\"](0);\n                console.log(_context7.t0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](_context7.t0.httpCode || 500, _context7.t0.message || \"Ooops! Something went wrong on the server!\");\n\n              case 21:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 17]]);\n      }));\n\n      function updateBook(_x12, _x13) {\n        return _updateBook.apply(this, arguments);\n      }\n\n      return updateBook;\n    }()\n  }, {\n    key: \"finishBook\",\n    value: function finishBook(book) {\n      book.status = \"finished\";\n      book.pagesRead = book.pages;\n    }\n  }, {\n    key: \"getUserGenres\",\n    value: function () {\n      var _getUserGenres = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(id) {\n        var books, genreMap;\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                _context8.next = 3;\n                return this.getUserBooks(id);\n\n              case 3:\n                books = _context8.sent;\n                genreMap = {};\n                books.forEach(function (book) {\n                  book.genres.slice(0, 2).forEach(function (genre) {\n                    if (!genreMap.hasOwnProperty(genre)) {\n                      genreMap[genre] = 1;\n                    } else {\n                      genreMap[genre] += 1;\n                    }\n                  });\n                });\n                return _context8.abrupt(\"return\", genreMap);\n\n              case 9:\n                _context8.prev = 9;\n                _context8.t0 = _context8[\"catch\"](0);\n                console.log(_context8.t0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](_context8.t0.httpCode || 500, _context8.t0.message || \"Ooops! Something went wrong on the server!\");\n\n              case 13:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[0, 9]]);\n      }));\n\n      function getUserGenres(_x14) {\n        return _getUserGenres.apply(this, arguments);\n      }\n\n      return getUserGenres;\n    }()\n  }]);\n\n  return UserBooksService;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (UserBooksService);\n\n//# sourceURL=webpack:///./api/services/userBooksService.js?");

/***/ }),

/***/ "./api/services/userService.js":
/*!*************************************!*\
  !*** ./api/services/userService.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase */ \"firebase\");\n/* harmony import */ var firebase__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../error/ErrorWithHttpCode */ \"./api/error/ErrorWithHttpCode.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar UserService = /*#__PURE__*/function () {\n  function UserService() {\n    _classCallCheck(this, UserService);\n\n    this.getUserById = this.getUserById.bind(this);\n  }\n\n  _createClass(UserService, [{\n    key: \"getUserById\",\n    value: function () {\n      var _getUserById = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(id) {\n        var user, snapshot, value;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return firebase__WEBPACK_IMPORTED_MODULE_0___default.a.database().ref(\"users\").child(id).once(\"value\");\n\n              case 3:\n                snapshot = _context.sent;\n                value = snapshot.val();\n\n                if (value) {\n                  _context.next = 7;\n                  break;\n                }\n\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](404, \"User with id \".concat(id, \" not found\"));\n\n              case 7:\n                user = {\n                  id: id,\n                  email: value.email,\n                  books: value.books || []\n                };\n                return _context.abrupt(\"return\", user);\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](0);\n                throw new _error_ErrorWithHttpCode__WEBPACK_IMPORTED_MODULE_1__[\"ErrorWithHttpCode\"](_context.t0.httpCode || 500, _context.t0.message);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 11]]);\n      }));\n\n      function getUserById(_x) {\n        return _getUserById.apply(this, arguments);\n      }\n\n      return getUserById;\n    }()\n  }]);\n\n  return UserService;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (UserService);\n\n//# sourceURL=webpack:///./api/services/userService.js?");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"axios\");\n\n//# sourceURL=webpack:///external_%22axios%22?");

/***/ }),

/***/ "body-parser":
/*!******************************!*\
  !*** external "body-parser" ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"body-parser\");\n\n//# sourceURL=webpack:///external_%22body-parser%22?");

/***/ }),

/***/ "core-js/stable":
/*!*********************************!*\
  !*** external "core-js/stable" ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"core-js/stable\");\n\n//# sourceURL=webpack:///external_%22core-js/stable%22?");

/***/ }),

/***/ "cors":
/*!***********************!*\
  !*** external "cors" ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"cors\");\n\n//# sourceURL=webpack:///external_%22cors%22?");

/***/ }),

/***/ "dotenv/config":
/*!********************************!*\
  !*** external "dotenv/config" ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"dotenv/config\");\n\n//# sourceURL=webpack:///external_%22dotenv/config%22?");

/***/ }),

/***/ "express":
/*!**************************!*\
  !*** external "express" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"express\");\n\n//# sourceURL=webpack:///external_%22express%22?");

/***/ }),

/***/ "firebase":
/*!***************************!*\
  !*** external "firebase" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"firebase\");\n\n//# sourceURL=webpack:///external_%22firebase%22?");

/***/ }),

/***/ "firebase/app":
/*!*******************************!*\
  !*** external "firebase/app" ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"firebase/app\");\n\n//# sourceURL=webpack:///external_%22firebase/app%22?");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"jsonwebtoken\");\n\n//# sourceURL=webpack:///external_%22jsonwebtoken%22?");

/***/ }),

/***/ "regenerator-runtime/runtime":
/*!**********************************************!*\
  !*** external "regenerator-runtime/runtime" ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"regenerator-runtime/runtime\");\n\n//# sourceURL=webpack:///external_%22regenerator-runtime/runtime%22?");

/***/ }),

/***/ "xml-js":
/*!*************************!*\
  !*** external "xml-js" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"xml-js\");\n\n//# sourceURL=webpack:///external_%22xml-js%22?");

/***/ })

/******/ });